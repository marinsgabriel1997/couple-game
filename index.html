<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Couple Game</title>
  <style>
    /* ============================================
       DESIGN SYSTEM - TEMA ADULTO ELEGANTE
    ============================================ */
    :root {
      /* Cores base */
      --bg-primary: #0d0d0d;
      --bg-secondary: #1a1a1a;
      --bg-card: #242424;
      --bg-elevated: #2d2d2d;
      
      /* Cores de texto */
      --text-primary: #f5f5f5;
      --text-secondary: #a0a0a0;
      --text-muted: #666;
      
      /* Cores de destaque por n√≠vel */
      --accent-moderado: #c9a857;
      --accent-intenso: #e64a4a;
      
      /* Cor atual (muda por n√≠vel) */
      --accent: var(--accent-moderado);
      --accent-glow: var(--accent-moderado);
      
      /* Tipos de casa */
      --casa-acao: #4a90d9;
      --casa-bonus: #4ade80;
      --casa-escolha: #c084fc;
      --casa-repeticao: #facc15;
      --casa-surpresa: #f472b6;
      --casa-inicio: #6b7280;
      --casa-final: #fbbf24;
      
      /* Sombras e efeitos */
      --shadow-sm: 0 2px 8px rgba(0,0,0,0.3);
      --shadow-md: 0 4px 16px rgba(0,0,0,0.4);
      --shadow-lg: 0 8px 32px rgba(0,0,0,0.5);
      --shadow-glow: 0 0 20px var(--accent);
      
      /* Espa√ßamentos */
      --space-xs: 0.25rem;
      --space-sm: 0.5rem;
      --space-md: 1rem;
      --space-lg: 1.5rem;
      --space-xl: 2rem;
      
      /* Bordas */
      --radius-sm: 0.5rem;
      --radius-md: 0.75rem;
      --radius-lg: 1rem;
      --radius-full: 50%;
      
      /* Transi√ß√µes */
      --transition-fast: 150ms ease;
      --transition-normal: 250ms ease;
      --transition-slow: 400ms ease;
    }

    /* Tema Moderado */
    .tema-moderado {
      --accent: #c9a857;
      --accent-glow: rgba(201, 168, 87, 0.4);
    }
    
    /* Tema Intenso */
    .tema-intenso {
      --accent: #e64a4a;
      --accent-glow: rgba(230, 74, 74, 0.4);
    }
    

    /* ============================================
       RESET E BASE
    ============================================ */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      font-size: 16px;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100dvh;
      line-height: 1.5;
      overflow-x: hidden;
    }

    /* ============================================
       LAYOUT DE P√ÅGINAS (WIZARD)
    ============================================ */
    .app {
      min-height: 100dvh;
      display: flex;
      flex-direction: column;
    }

    .page {
      display: none;
      flex-direction: column;
      min-height: 100dvh;
      padding: var(--space-lg);
      animation: fadeIn var(--transition-normal);
    }

    .page.is-active {
      display: flex;
    }

    .page-inner {
      width: 100%;
      max-width: 1100px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: var(--space-lg);
    }

    .page-columns {
      display: flex;
      flex-direction: column;
      gap: var(--space-lg);
    }

    .col-left,
    .col-right {
      display: flex;
      flex-direction: column;
      gap: var(--space-md);
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* ============================================
       COMPONENTES - TIPOGRAFIA
    ============================================ */
    .titulo {
      font-size: 1.75rem;
      font-weight: 700;
      text-align: center;
      margin-bottom: var(--space-lg);
      background: linear-gradient(135deg, var(--accent), var(--text-primary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .subtitulo {
      font-size: 1.1rem;
      color: var(--text-secondary);
      text-align: center;
      margin-bottom: var(--space-md);
    }

    .texto-destaque {
      color: var(--accent);
      font-weight: 600;
    }

    /* ============================================
       COMPONENTES - INPUTS
    ============================================ */
    .input-grupo {
      margin-bottom: var(--space-md);
    }

    .input-label {
      display: block;
      font-size: 0.875rem;
      color: var(--text-secondary);
      margin-bottom: var(--space-xs);
    }

    .input {
      width: 100%;
      padding: var(--space-md);
      font-size: 1rem;
      color: var(--text-primary);
      background: var(--bg-card);
      border: 2px solid var(--bg-elevated);
      border-radius: var(--radius-md);
      transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
    }

    .input:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px var(--accent-glow);
    }

    .input::placeholder {
      color: var(--text-muted);
    }

    .emoji-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(44px, 1fr));
      gap: 6px;
      background: var(--bg-card);
      border: 2px solid var(--bg-elevated);
      border-radius: var(--radius-md);
      padding: var(--space-sm);
      max-height: 210px;
      overflow-y: auto;
    }

    .emoji-btn {
      width: 44px;
      height: 44px;
      border-radius: var(--radius-sm);
      border: 1px solid transparent;
      background: var(--bg-elevated);
      color: var(--text-primary);
      font-size: 1.5rem;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: transform var(--transition-fast), border-color var(--transition-fast), box-shadow var(--transition-fast);
    }

    .emoji-btn:hover {
      transform: translateY(-1px);
    }

    .emoji-btn.selected {
      border-color: var(--accent);
      box-shadow: 0 0 0 2px var(--accent-glow);
    }

    .form-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: var(--space-md);
    }

    .card-player {
      background: var(--bg-secondary);
      border: 2px solid var(--bg-elevated);
      border-radius: var(--radius-md);
      padding: var(--space-md);
      display: flex;
      flex-direction: column;
      gap: var(--space-md);
      box-shadow: var(--shadow-sm);
    }

    .card-titulo {
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--text-muted);
    }

    /* ============================================
       COMPONENTES - BOT√ïES
    ============================================ */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-sm);
      padding: var(--space-md) var(--space-lg);
      font-size: 1rem;
      font-weight: 600;
      color: var(--text-primary);
      background: var(--bg-card);
      border: 2px solid var(--bg-elevated);
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all var(--transition-fast);
      touch-action: manipulation;
      user-select: none;
      min-height: 52px;
    }

    .btn:active {
      transform: scale(0.97);
    }

    .btn:disabled {
      opacity: 0.4;
      cursor: not-allowed;
      transform: none;
    }

    .btn-primary {
      background: var(--accent);
      border-color: var(--accent);
      color: var(--bg-primary);
    }

    .btn-primary:hover:not(:disabled) {
      box-shadow: var(--shadow-glow);
    }

    .btn-outline {
      background: transparent;
      border-color: var(--accent);
      color: var(--accent);
    }

    .btn-ghost {
      background: transparent;
      border-color: transparent;
      color: var(--text-secondary);
    }

    .btn-ghost:hover {
      color: var(--text-primary);
      background: var(--bg-elevated);
    }

    .btn-danger {
      background: transparent;
      border-color: var(--accent-intenso);
      color: var(--accent-intenso);
    }

    .btn-block {
      width: 100%;
    }

    .btn-nivel {
      flex-direction: column;
      padding: var(--space-lg);
      text-align: center;
    }

    .btn-nivel .nivel-nome {
      font-size: 1.1rem;
    }

    .btn-nivel .nivel-desc {
      font-size: 0.8rem;
      font-weight: 400;
      opacity: 0.7;
    }

    .btn-nivel.moderado { border-color: var(--accent-moderado); color: var(--accent-moderado); }
    .btn-nivel.intenso { border-color: var(--accent-intenso); color: var(--accent-intenso); }

    .btn-nivel.selected {
      background: var(--accent);
      color: var(--bg-primary);
    }

    .btn-nivel.moderado.selected { background: var(--accent-moderado); }
    .btn-nivel.intenso.selected { background: var(--accent-intenso); }

    /* ============================================
       COMPONENTES - DICAS
    ============================================ */
    .dicas {
      background: var(--bg-secondary);
      border-radius: var(--radius-md);
      padding: var(--space-md);
      margin-top: auto;
      margin-bottom: var(--space-md);
    }

    .dicas-titulo {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--accent);
      margin-bottom: var(--space-sm);
    }

    .dicas-lista {
      list-style: none;
      font-size: 0.875rem;
      color: var(--text-secondary);
    }

    .dicas-lista li {
      padding: var(--space-xs) 0;
      padding-left: var(--space-md);
      position: relative;
    }

    .dicas-lista li::before {
      content: "‚Ä¢";
      position: absolute;
      left: 0;
      color: var(--accent);
    }

    /* ============================================
       COMPONENTES - GRUPO DE BOT√ïES
    ============================================ */
    .btn-grupo {
      display: flex;
      gap: var(--space-sm);
    }

    .btn-grupo .btn {
      flex: 1;
    }

    .btn-stack {
      display: flex;
      flex-direction: column;
      gap: var(--space-sm);
    }

    .nivel-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: var(--space-sm);
    }

    /* ============================================
       P√ÅGINA DO JOGO - LAYOUT
    ============================================ */
    .page-jogo {
      padding: 0;
      gap: var(--space-md);
      min-height: 100dvh;
    }

    /* Cabe√ßalho do jogo */
    .jogo-header {
      text-align: center;
      padding: var(--space-sm);
      background: var(--bg-card);
      border-radius: var(--radius-md);
    }

    .jogo-vez {
      font-size: 1rem;
      color: var(--text-secondary);
    }

    .jogo-vez .nome {
      color: var(--accent);
      font-weight: 700;
    }

    .jogo-placar {
      font-size: 0.875rem;
      color: var(--text-muted);
      margin-top: var(--space-xs);
    }

    /* ============================================
       TABULEIRO ESTILO MONOPOLY
    ============================================ */
    .tabuleiro-container {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      padding: 0;
      position: relative;
      width: 100vw;
      height: 100dvh;
    }

    .tabuleiro-monopoly {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      grid-template-rows: repeat(7, 1fr);
      gap: 2px;
      width: 100vw;
      height: 100dvh;
      max-width: 100vw;
      max-height: 100dvh;
      background: var(--bg-primary);
      padding: 3px;
      border-radius: var(--radius-md);
      border: 2px solid var(--accent);
    }

    .legenda-casas {
      display: flex;
      flex-wrap: wrap;
      gap: 8px 12px;
      justify-content: center;
      align-items: center;
      width: 100%;
      margin-bottom: var(--space-sm);
      font-size: 0.65rem;
      color: var(--text-primary);
    }

    .legenda-nota {
      width: 100%;
      text-align: center;
      color: var(--text-secondary);
      font-size: 0.6rem;
    }

    .legenda-item {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      white-space: nowrap;
    }

    .legenda-cor {
      width: 10px;
      height: 10px;
      border-radius: 3px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      flex: 0 0 auto;
    }

    .legenda-cor.acao { background: var(--casa-acao); }
    .legenda-cor.escolha { background: var(--casa-escolha); }
    .legenda-cor.surpresa { background: var(--casa-surpresa); }
    .legenda-cor.inicio { background: var(--casa-inicio); }
    .legenda-cor.final { background: var(--casa-final); }

    .casa {
      background: var(--bg-card);
      border-radius: 4px;
      display: flex;
      flex-direction: column;
      align-items: stretch;
      justify-content: flex-start;
      padding: 3px;
      position: relative;
      font-size: 0.5rem;
      text-align: left;
      transition: all var(--transition-fast);
      overflow: hidden;
      cursor: default;
      border: 2px solid transparent;
    }

    .casa-inner {
      display: grid;
      grid-template-columns: 1fr;
      height: 100%;
      width: 100%;
    }


    .casa-conteudo {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      justify-content: flex-start;
      gap: 4px;
      flex: 1 1 auto;
      min-width: 0;
    }

    .casa-slot {
      width: 100%;
      min-height: 18px;
      display: flex;
      align-items: center;
      justify-content: flex-start;
    }

    .casa-peao-slot {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 1px 4px;
      border-radius: 10px;
      background: var(--bg-primary);
      border: 1px solid var(--bg-elevated);
      font-size: 0.5rem;
      font-weight: 700;
      color: var(--text-primary);
      white-space: nowrap;
      max-width: 70px;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .casa-peao-slot.j1 {
      border-color: var(--accent);
    }

    .casa-peao-slot.j2 {
      border-color: var(--text-primary);
    }

    .casa-desafio {
      font-size: var(--casa-texto-tamanho, 0.75rem);
      line-height: 1.2;
      word-break: break-word;
      color: inherit;
    }

    .casa-divisor {
      width: 100%;
      height: 1px;
      background: var(--bg-elevated);
    }

    .casa:hover {
      z-index: 5;
      transform: scale(1.05);
    }

    .casa.atual {
      border-color: var(--accent);
      box-shadow: 0 0 10px var(--accent-glow);
      z-index: 10;
    }

    .casa .casa-desafio.genero-homem {
      color: #60a5fa;
    }

    .casa .casa-desafio.genero-mulher {
      color: #f472b6;
    }


    /* Cores por tipo de casa */
    .casa.acao { border: 3px solid var(--casa-acao); }
    .casa.bonus { border: 3px solid var(--casa-bonus); }
    .casa.escolha { border: 3px solid var(--casa-escolha); }
    .casa.repeticao { border: 3px solid var(--casa-repeticao); }
    .casa.surpresa { border: 3px solid var(--casa-surpresa); }
    .casa.inicio { border: 3px solid var(--casa-inicio); background: linear-gradient(135deg, var(--bg-elevated), var(--bg-card)); }
    .casa.final { border: 3px solid var(--casa-final); background: linear-gradient(135deg, var(--casa-final), var(--bg-card)); }

    .casa.atual.acao { border-color: var(--casa-acao); box-shadow: 0 0 12px var(--casa-acao); }
    .casa.atual.bonus { border-color: var(--casa-bonus); box-shadow: 0 0 12px var(--casa-bonus); }
    .casa.atual.escolha { border-color: var(--casa-escolha); box-shadow: 0 0 12px var(--casa-escolha); }
    .casa.atual.repeticao { border-color: var(--casa-repeticao); box-shadow: 0 0 12px var(--casa-repeticao); }
    .casa.atual.surpresa { border-color: var(--casa-surpresa); box-shadow: 0 0 12px var(--casa-surpresa); }

    /* Centro do tabuleiro - Desafio Atual */
    .tabuleiro-overlay {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: none;
      padding: 0;
    }

    .tabuleiro-centro {
      background: var(--bg-primary);
      border-radius: var(--radius-sm);
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: var(--space-md);
      text-align: center;
      border: 1px solid var(--bg-secondary);
      width: calc(100% * 5 / 7);
      height: calc(100% * 5 / 7);
      max-width: 100%;
      max-height: 100%;
      gap: var(--space-sm);
      pointer-events: auto;
    }

    .tabuleiro-centro .jogo-header {
      background: transparent;
      padding: 0;
    }

    .centro-titulo {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--accent);
      margin-bottom: var(--space-xs);
    }

    .centro-tipo {
      font-size: 0.65rem;
      text-transform: uppercase;
      padding: 2px 8px;
      border-radius: var(--radius-sm);
      margin-bottom: var(--space-sm);
      color: var(--bg-primary);
      font-weight: 600;
    }

    .centro-tipo.acao { background: var(--casa-acao); }
    .centro-tipo.bonus { background: var(--casa-bonus); }
    .centro-tipo.escolha { background: var(--casa-escolha); }
    .centro-tipo.repeticao { background: var(--casa-repeticao); }
    .centro-tipo.surpresa { background: var(--casa-surpresa); }
    .centro-tipo.inicio { background: var(--casa-inicio); }
    .centro-tipo.final { background: var(--casa-final); }

    .centro-desafio {
      font-size: 0.85rem;
      line-height: 1.4;
      color: var(--text-primary);
    }

    .centro-efeito {
      font-size: 0.75rem;
      color: var(--accent);
      margin-top: var(--space-sm);
      font-style: italic;
    }

    .centro-vazio {
      color: var(--text-muted);
      font-style: italic;
      font-size: 0.8rem;
    }

    /* ============================================
       CONTROLES DO JOGO
    ============================================ */
    .jogo-controles {
      background: var(--bg-secondary);
      margin: 0;
      padding: var(--space-sm);
      border: 1px solid var(--bg-elevated);
      border-radius: var(--radius-md);
      width: 100%;
    }

    .dado-wrap {
      display: flex;
      justify-content: center;
      margin-bottom: var(--space-sm);
    }

    .btn-dado {
      width: min(150px, 60vw);
      aspect-ratio: 1;
      padding: 0;
      font-size: 2.5rem;
      font-weight: 800;
      letter-spacing: 0.02em;
      background: radial-gradient(circle at 30% 30%, #2f2f2f, var(--bg-card));
      border: 2px solid var(--accent);
      border-radius: 18px;
      color: var(--accent);
      box-shadow: var(--shadow-md);
    }

    .btn-dado:hover:not(:disabled) {
      background: radial-gradient(circle at 30% 30%, var(--accent), #2f2f2f);
      color: var(--bg-primary);
      box-shadow: var(--shadow-glow);
    }

    .btn-dado:disabled {
      border-color: var(--bg-elevated);
      color: var(--text-muted);
      box-shadow: none;
    }

    .btn-dado.rolando {
      animation: rollShake 320ms ease-in-out infinite;
    }

    @keyframes rollShake {
      0% { transform: rotate(0deg) scale(1); }
      30% { transform: rotate(-6deg) scale(1.02); }
      60% { transform: rotate(6deg) scale(1.03); }
      100% { transform: rotate(0deg) scale(1); }
    }

    .acoes-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: var(--space-xs);
      justify-items: center;
    }

    .acoes-grid .btn {
      font-size: 0.75rem;
      padding: var(--space-sm);
      min-height: 36px;
      width: min(70%, 200px);
    }

    /* ============================================
       MODAL DE VIT√ìRIA
    ============================================ */
    .modal-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.8);
      z-index: 100;
      align-items: center;
      justify-content: center;
      padding: var(--space-lg);
      animation: fadeIn var(--transition-normal);
    }

    .modal-overlay.is-active {
      display: flex;
    }

    .modal {
      background: var(--bg-card);
      border-radius: var(--radius-lg);
      padding: var(--space-xl);
      text-align: center;
      max-width: 320px;
      width: 100%;
      border: 2px solid var(--accent);
      box-shadow: var(--shadow-glow);
    }

    .modal-icone {
      font-size: 3rem;
      margin-bottom: var(--space-md);
    }

    .modal-titulo {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: var(--space-sm);
      color: var(--accent);
    }

    .modal-texto {
      color: var(--text-secondary);
      margin-bottom: var(--space-lg);
    }

    /* ============================================
       UTILIT√ÅRIOS
    ============================================ */
    .mt-auto { margin-top: auto; }
    .mb-md { margin-bottom: var(--space-md); }
    .mb-lg { margin-bottom: var(--space-lg); }
    .text-center { text-align: center; }
    .hidden { display: none !important; }

    /* ============================================
       RESPONSIVO
    ============================================ */
    @media (min-width: 480px) {
      .btn-dado {
        width: 160px;
        font-size: 2.75rem;
      }

      .casa {
        font-size: 0.55rem;
      }

      .casa .casa-desafio {
        font-size: 0.75rem;
      }

      .centro-desafio {
        font-size: 1rem;
      }
    }

    @media (min-width: 900px) {
      .page {
        padding: var(--space-xl);
      }

      .page-columns {
        flex-direction: row;
        align-items: flex-start;
        gap: var(--space-xl);
      }

      .col-left {
        flex: 1;
        max-width: 380px;
      }

      .col-right {
        flex: 1.2;
      }

      .form-grid {
        grid-template-columns: repeat(2, 1fr);
      }

      .nivel-grid {
        grid-template-columns: repeat(3, 1fr);
      }

      .btn-stack {
        flex-direction: row;
      }

      .btn-stack .btn {
        flex: 1;
      }

      .page.page-jogo {
        padding: 0;
      }
    }

    @media (max-width: 360px) {
      .tabuleiro-monopoly {
        gap: 1px;
      }

      .casa .casa-desafio {
        display: none;
      }
    }

    @media (max-width: 520px) {
      .tabuleiro-monopoly {
        padding: 1px;
        gap: 1px;
      }

      .tabuleiro-centro {
        width: calc(100% * 5 / 7);
        height: calc(100% * 5 / 7);
      }

      .casa {
        padding: 1px;
      }

      .casa.acao,
      .casa.bonus,
      .casa.escolha,
      .casa.repeticao,
      .casa.surpresa,
      .casa.inicio,
      .casa.final {
        border-width: 2px;
      }

      .casa-conteudo {
        gap: 3px;
      }

      .casa-slot {
        min-height: 14px;
      }

      .casa-peao-slot {
        font-size: 0.45rem;
        max-width: 60px;
      }

      .casa-desafio {
        font-size: 0.6rem;
        line-height: 1.1;
      }
    }
  </style>
</head>
<body>
  <div class="app" id="app">
    
    <!-- ========================================
         P√ÅGINA 1 - NOMES
    ======================================== -->
    <section class="page is-active" id="paginaNomes">
      <div class="page-inner">
        <div>
          <h1 class="titulo">Jogo do Casal</h1>
          <p class="subtitulo">Uma noite especial a dois</p>
        </div>

        <div class="page-columns">
          <div class="col-left">
            <div class="dicas">
              <p class="dicas-titulo">üí° Como jogar</p>
              <ul class="dicas-lista">
                <li>Toque no dado para rolar automaticamente</li>
                <li>O n√∫mero sorteado move o pe√£o sozinho</li>
                <li>Todos os desafios ficam vis√≠veis no tabuleiro</li>
                <li>O jogo salva automaticamente</li>
              </ul>
            </div>
          </div>

          <div class="col-right">
            <div class="form-grid">
              <div class="card-player">
                <div class="card-titulo">Jogador 1</div>
                <div class="input-grupo">
                  <label class="input-label" for="nome1">Nome</label>
                  <input type="text" class="input" id="nome1" placeholder="Digite o primeiro nome" maxlength="20" autocomplete="off">
                </div>
                <div class="input-grupo">
                  <label class="input-label" for="sexo1">Sexo</label>
                  <select class="input" id="sexo1">
                    <option value="">Selecione</option>
                    <option value="homem">Homem</option>
                    <option value="mulher">Mulher</option>
                  </select>
                </div>
                <div class="input-grupo">
                  <label class="input-label" for="emoji1">Emoji</label>
                  <input type="hidden" id="emoji1" value="">
                  <div class="emoji-grid" id="emojiGrid1" aria-label="Escolher emoji do jogador 1"></div>
                </div>
              </div>

              <div class="card-player">
                <div class="card-titulo">Jogador 2</div>
                <div class="input-grupo">
                  <label class="input-label" for="nome2">Nome</label>
                  <input type="text" class="input" id="nome2" placeholder="Digite o segundo nome" maxlength="20" autocomplete="off">
                </div>
                <div class="input-grupo">
                  <label class="input-label" for="sexo2">Sexo</label>
                  <select class="input" id="sexo2">
                    <option value="">Selecione</option>
                    <option value="homem">Homem</option>
                    <option value="mulher">Mulher</option>
                  </select>
                </div>
                <div class="input-grupo">
                  <label class="input-label" for="emoji2">Emoji</label>
                  <input type="hidden" id="emoji2" value="">
                  <div class="emoji-grid" id="emojiGrid2" aria-label="Escolher emoji do jogador 2"></div>
                </div>
              </div>
            </div>

            <div class="btn-stack">
              <button class="btn btn-outline btn-block" id="btnPreencher">Preencher r√°pido</button>
              <button class="btn btn-primary btn-block" id="btnAvancar" disabled>Avan√ßar</button>
              <button class="btn btn-outline btn-block hidden" id="btnContinuar">Continuar jogo salvo</button>
              <button class="btn btn-danger btn-block hidden" id="btnApagar">Apagar salvamento</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ========================================
         P√ÅGINA 2 - N√çVEL
    ======================================== -->
    <section class="page" id="paginaNivel">
      <div class="page-inner">
        <div>
          <h1 class="titulo">Escolha o N√≠vel</h1>
          <p class="subtitulo" id="nomesEscolhidos"></p>
        </div>

        <div class="page-columns">
          <div class="col-left">
            <div class="dicas">
              <p class="dicas-titulo">‚ÑπÔ∏è Sobre os n√≠veis</p>
              <ul class="dicas-lista">
                <li><strong>Moderado:</strong> Car√≠cias, beijos e cumplicidade</li>
                <li><strong>Intenso:</strong> Provoca√ß√µes e toques sensuais</li>
              </ul>
            </div>
          </div>

          <div class="col-right">
            <div class="nivel-grid">
              <button class="btn btn-nivel moderado" data-nivel="moderado">
                <span class="nivel-nome">üåô N√≠vel 1 ‚Äì Moderado</span>
                <span class="nivel-desc">Rom√¢ntico e sensual</span>
              </button>
              <button class="btn btn-nivel intenso" data-nivel="intenso">
                <span class="nivel-nome">üî• N√≠vel 2 ‚Äì Intenso</span>
                <span class="nivel-desc">Provocante e ousado</span>
              </button>
            </div>
            <p class="subtitulo">
              Antes de jogar, combinem o que √© confort√°vel para voc√™s (ex.: regi√µes ok para tocar, tirar pe√ßa de roupa, palavras que preferem evitar).
              Se algo n√£o estiver bom, vale pausar e ajustar.
            </p>

            <div class="btn-grupo">
              <button class="btn btn-ghost" id="btnVoltar">Voltar</button>
              <button class="btn btn-primary" id="btnIniciar" disabled>Iniciar</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ========================================
         P√ÅGINA 3 - JOGO
    ======================================== -->
    <section class="page page-jogo" id="paginaJogo">
      <!-- Tabuleiro Monopoly -->
      <div class="tabuleiro-container">
        <div class="tabuleiro-monopoly" id="tabuleiro">
          <!-- Casas geradas via JS no per√≠metro -->
          <!-- Centro com desafio atual -->
        </div>
        <div class="tabuleiro-overlay">
          <div class="tabuleiro-centro">
            <div class="jogo-header">
              <p class="jogo-vez">Jogada de: <span class="nome" id="ultimoJogador">-</span></p>
              <p class="jogo-placar" id="placar">-</p>
              <p class="jogo-vez">Pr√≥xima vez: <span class="nome" id="jogadorAtual">-</span></p>
            </div>

            <div class="centro-titulo">Desafio Atual</div>
            <div class="centro-vazio" id="centroConteudo">Jogue o dado para come√ßar!</div>

            <div class="jogo-controles">
              <div class="dado-wrap">
                <button class="btn btn-dado" id="btnDado" aria-label="Rolar dado">?</button>
              </div>
              <div class="legenda-casas" aria-label="Legenda das casas">
                <div class="legenda-item"><span class="legenda-cor inicio"></span>In√≠cio</div>
                <div class="legenda-item"><span class="legenda-cor final"></span>Final</div>
                <div class="legenda-item"><span class="legenda-cor acao"></span>A√ß√£o</div>
                <div class="legenda-item"><span class="legenda-cor escolha"></span>Escolha</div>
                <div class="legenda-item"><span class="legenda-cor surpresa"></span>Surpresa</div>
                <div class="legenda-nota">Texto do desafio usa a cor do g√™nero.</div>
              </div>
              <div class="acoes-grid">
                <button class="btn btn-ghost" id="btnReiniciar">Reiniciar</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ========================================
         MODAL DE VIT√ìRIA
    ======================================== -->
    <div class="modal-overlay" id="modalVitoria">
      <div class="modal">
        <div class="modal-icone">üèÜ</div>
        <h2 class="modal-titulo" id="vencedorNome">Parab√©ns!</h2>
        <p class="modal-texto">Pr√™mio: cart√£o presente caseiro. Combinar os 3 cupons e aproveitar juntos!</p>
        <div class="btn-stack">
          <button class="btn btn-primary btn-block" id="btnJogarNovamente">Jogar Novamente</button>
          <button class="btn btn-outline btn-block" id="btnVoltarMenu">Voltar ao Menu</button>
        </div>
      </div>
    </div>

  </div>

  <script>
    /* ============================================
       DADOS DO JOGO - ESTRUTURA PRINCIPAL
    ============================================ */
    const jogo = {
      moderado: {
        tabuleiro: [
          "inicio", "acao", "acao", "escolha", "acao", "surpresa",
          "acao", "acao", "acao", "acao", "acao", "acao",
          "acao", "escolha", "surpresa", "acao", "acao", "acao",
          "acao", "acao", "escolha", "acao", "acao", "final"
        ],
        desafios: {
          acao: {
            generico: [
              { descricao: "Abra√ßo apertado", desafio: "D√™ um abra√ßo demorado em {parceiro}." },
              { descricao: "M√£os dadas", desafio: "Segure as m√£os de {parceiro} e respire junto." },
              { descricao: "Abra√ßo por tr√°s", desafio: "Abrace {parceiro} por tr√°s e mantenha o corpo colado." },
              { descricao: "Carinho no ombro", desafio: "Fa√ßa um carinho no ombro de {parceiro}." },
              { descricao: "Cafun√©", desafio: "Fa√ßa cafun√© em {parceiro}." },
              { descricao: "Respirar juntos", desafio: "Fiquem de m√£os dadas e respirem juntos." },
              { descricao: "Abra√ßo combinado", desafio: "Abrace {parceiro} por tr√°s enquanto {parceiro} segura suas m√£os." }
            ],
            jogador_homem: [
              { descricao: "Toque na nuca", desafio: "{jogador}, segure a nuca de {parceiro} e aproxime o rosto." },
              { descricao: "Elogio rom√¢ntico", desafio: "{jogador}, fa√ßa um elogio rom√¢ntico olhando nos olhos de {parceiro}." },
              { descricao: "Beijo na bochecha", desafio: "{jogador}, d√™ um beijo leve na bochecha de {parceiro}." },
              { descricao: "Carinho no cabelo", desafio: "{jogador}, fa√ßa um carinho no cabelo de {parceiro}." },
              { descricao: "Abra√ßo por tr√°s", desafio: "{jogador}, abrace {parceiro} por tr√°s e balance devagar." }
            ],
            jogador_mulher: [
              { descricao: "Nuca e beijo", desafio: "{jogador}, pegue na nuca de {parceiro} e d√™ um beijo intenso." },
              { descricao: "Carinho no rosto", desafio: "{jogador}, fa√ßa um carinho no rosto de {parceiro}." },
              { descricao: "Beijo na testa", desafio: "{jogador}, d√™ um beijo suave na testa de {parceiro}." },
              { descricao: "M√£os entrela√ßadas", desafio: "{jogador}, entrelace as m√£os com {parceiro} e encoste a testa." },
              { descricao: "Elogio carinhoso", desafio: "{jogador}, fa√ßa um elogio carinhoso a {parceiro}." }
            ],
            parceiro_homem: [
              { descricao: "Escolha do parceiro", desafio: "Deixe {parceiro} escolher onde quer um carinho." },
              { descricao: "Massagem r√°pida", desafio: "Fa√ßa uma massagem r√°pida nos ombros de {parceiro}." },
              { descricao: "Beijo na testa", desafio: "Pe√ßa a {parceiro} um beijo suave na sua testa." },
              { descricao: "Abra√ßo colado", desafio: "Convide {parceiro} para um abra√ßo colado." },
              { descricao: "Abra√ßo guiado", desafio: "Pe√ßa a {parceiro} para te abra√ßar por tr√°s enquanto voc√™ segura as m√£os de {ele_ela_parceiro}." }
            ],
            parceiro_mulher: [
              { descricao: "Nuca e costas", desafio: "Segure a nuca de {parceiro} enquanto {parceiro} passa as m√£os nas suas costas." },
              { descricao: "Olhar profundo", desafio: "Olhe nos olhos de {parceiro} e diga algo que admira em {parceiro}." },
              { descricao: "Beijo delicado", desafio: "Pe√ßa a {parceiro} um beijo delicado na sua bochecha." },
              { descricao: "Carinho no rosto", desafio: "Deixe {parceiro} fazer um carinho no seu rosto." },
              { descricao: "Elogio fofo", desafio: "Pe√ßa a {parceiro} para dizer algo fofo e dar um beijo." }
            ]
          },
          bonus: {
            generico: [
              { descricao: "Abra√ßo apertado", desafio: "Voc√™s ficam abra√ßados." },
              { descricao: "Clima musical", desafio: "{parceiro} escolhe a m√∫sica do momento." },
              { descricao: "Abra√ßo combinado", desafio: "Abrace por tr√°s enquanto {parceiro} segura suas m√£os." },
              { descricao: "Momento fofo", desafio: "Troquem um elogio r√°pido e se abracem." },
              { descricao: "Carinho extra", desafio: "Fa√ßam carinhos leves no rosto." }
            ],
            jogador_homem: [
              { descricao: "Carinho extra", desafio: "{jogador}, pe√ßa a {parceiro} um carinho espec√≠fico." },
              { descricao: "Momento a dois", desafio: "{jogador}, receba um beijo b√¥nus de {parceiro}." },
              { descricao: "Abra√ßo guiado", desafio: "{jogador}, pe√ßa a {parceiro} um abra√ßo colado enquanto {ele_ela_parceiro} segura sua nuca." },
              { descricao: "Abra√ßo b√¥nus", desafio: "{jogador}, ganhe um abra√ßo apertado de {parceiro}." },
              { descricao: "Elogio direto", desafio: "{jogador}, pe√ßa um elogio direto de {parceiro}. Ex: pe√ßa um elogio sobre a boca ou sobre como {ele_ela_parceiro} toca." }
            ],
            jogador_mulher: [
              { descricao: "Escolha do parceiro", desafio: "{jogador}, escolha um beijo extra para receber." },
              { descricao: "Massagem r√°pida", desafio: "{jogador}, ganhe uma massagem r√°pida de {parceiro}." },
              { descricao: "Carinho b√¥nus", desafio: "{jogador}, pe√ßa um carinho na m√£o ou no rosto de {parceiro}." },
              { descricao: "Abra√ßo por tr√°s", desafio: "{jogador}, receba um abra√ßo por tr√°s e fique de olho fechado." },
              { descricao: "Momento fofo", desafio: "{jogador}, ganhe um elogio e um abra√ßo de {parceiro}." }
            ],
            parceiro_homem: [
              { descricao: "Momento a dois", desafio: "{parceiro} ganha um beijo extra onde {ele_ela_parceiro} quiser." },
              { descricao: "Massagem nas m√£os", desafio: "Fa√ßa uma massagem nas m√£os de {parceiro}." },
              { descricao: "Beijo b√¥nus", desafio: "D√™ a {parceiro} um beijo extra e um elogio r√°pido." },
              { descricao: "Carinho de mimo", desafio: "Fa√ßa um carinho nos ombros de {parceiro}." },
              { descricao: "Momento fofo", desafio: "Deixe {parceiro} receber um abra√ßo apertado e um beijo na testa." }
            ],
            parceiro_mulher: [
              { descricao: "Carinho extra", desafio: "{parceiro} escolhe um carinho para receber agora." },
              { descricao: "Abra√ßo apertado", desafio: "D√™ um abra√ßo longo em {parceiro}." },
              { descricao: "Beijo b√¥nus", desafio: "D√™ a {parceiro} um beijo extra onde {ele_ela_parceiro} preferir." },
              { descricao: "Carinho delicado", desafio: "Fa√ßa um carinho leve no cabelo de {parceiro}." },
              { descricao: "Momento fofo", desafio: "Pe√ßa a {parceiro} um elogio e retribua com um beijo." }
            ]
          },
          escolha: {
            generico: [
              { descricao: "Abra√ßo por tr√°s", desafio: "Escolha: abra√ßo por tr√°s OU abra√ßo colado de frente." },
              { descricao: "Massagem nas m√£os", desafio: "Escolha: massagem nas m√£os OU no pesco√ßo de {parceiro}." },
              { descricao: "Carinho suave", desafio: "Escolha: carinho no rosto OU cafun√© em {parceiro}." },
              { descricao: "Abra√ßo ou beijo", desafio: "Escolha: abra√ßo longo OU beijo na testa de {parceiro}." },
              { descricao: "Olhar ou sussurro", desafio: "Escolha: olhar nos olhos OU sussurrar algo fofo." },
              { descricao: "Ritual rapido", desafio: "Escolha: beijo lento OU abraco apertado. Ex: 10s de beijo com olhos fechados." },
              { descricao: "Toque guiado", desafio: "Escolha: cafune OU carinho na nuca. Ex: movimentos circulares por 20s." },
              { descricao: "Sorriso e olho", desafio: "Escolha: olhar nos olhos OU dizer algo fofo. Ex: diga o que mais gosta em {parceiro}." },
              { descricao: "Beijo leve", desafio: "Escolha: beijo na testa OU beijo na mao. Ex: beije a mao e encoste na bochecha." }
            ],
            jogador_homem: [
              { descricao: "Abra√ßo apertado", desafio: "{jogador}, escolha: abra√ßo longo OU dan√ßa lenta com {parceiro}." },
              { descricao: "Beijo no pesco√ßo", desafio: "{jogador}, escolha: beijo no pesco√ßo OU na testa de {parceiro}." },
              { descricao: "Elogio ou nuca", desafio: "{jogador}, escolha: elogio carinhoso OU segurar a nuca de {parceiro} e beijar." },
              { descricao: "Carinho ou abra√ßo", desafio: "{jogador}, escolha: carinho no rosto OU abra√ßo." },
              { descricao: "M√£os dadas", desafio: "{jogador}, escolha: m√£os dadas OU beijo na m√£o de {parceiro}." }
            ],
            jogador_mulher: [
              { descricao: "Nuca ou cafun√©", desafio: "{jogador}, escolha: segurar a nuca de {parceiro} e beijar OU cafun√©." },
              { descricao: "Elogio rom√¢ntico", desafio: "{jogador}, escolha: elogio rom√¢ntico OU promessa fofa para {parceiro}." },
              { descricao: "Abra√ßo ou sorriso", desafio: "{jogador}, escolha: abra√ßo apertado OU sorriso c√∫mplice para {parceiro}." },
              { descricao: "Carinho ou beijo", desafio: "{jogador}, escolha: carinho no cabelo OU beijo na testa de {parceiro}." },
              { descricao: "Palavra doce", desafio: "{jogador}, escolha: dizer algo fofo OU dar um beijo na m√£o de {parceiro}." }
            ],
            parceiro_homem: [
              { descricao: "Abra√ßo apertado", desafio: "Pergunte a {parceiro} se {ele_ela_parceiro} prefere abra√ßo longo OU olhar nos olhos." },
              { descricao: "Massagem nas m√£os", desafio: "Deixe {parceiro} escolher: massagem no ombro OU nas m√£os." },
              { descricao: "Beijo de escolha", desafio: "Deixe {parceiro} escolher: beijo na testa OU na bochecha." },
              { descricao: "Carinho guiado", desafio: "Pe√ßa a {parceiro} para escolher: carinho no rosto OU abra√ßo colado." },
              { descricao: "Momento fofo", desafio: "Deixe {parceiro} escolher entre sussurrar algo fofo OU dar um beijo demorado." }
            ],
            parceiro_mulher: [
              { descricao: "Carinho a escolha", desafio: "Deixe {parceiro} escolher: carinho no cabelo OU no rosto." },
              { descricao: "Abra√ßo apertado", desafio: "Ofere√ßa a {parceiro} a escolha entre abra√ßo longo OU massagem r√°pida." },
              { descricao: "Beijo ou elogio", desafio: "Ofere√ßa a {parceiro} a escolha entre beijo na testa OU elogio fofo." },
              { descricao: "M√£os dadas", desafio: "Deixe {parceiro} escolher: m√£os dadas OU abra√ßo por tr√°s." }
            ]
          },
          repeticao: {
            generico: [
              { descricao: "Carinho extra", desafio: "Repita o √∫ltimo carinho que recebeu de {parceiro}." },
              { descricao: "Momento a dois", desafio: "Recrie o momento mais fofo at√© agora." },
              { descricao: "Repetir beijo", desafio: "Repitam o √∫ltimo beijo que gostaram mais." },
              { descricao: "Carinho de novo", desafio: "Repitam o √∫ltimo carinho no rosto." },
              { descricao: "Momento favorito", desafio: "Recriem o melhor abra√ßo de hoje." }
            ],
            jogador_homem: [
              { descricao: "Repetir carinho", desafio: "{jogador}, repita o √∫ltimo beijo que deu em {parceiro}." },
              { descricao: "Elogio rom√¢ntico", desafio: "{jogador}, fa√ßa novamente o √∫ltimo elogio que fez." },
              { descricao: "Beijo suave", desafio: "{jogador}, repita o √∫ltimo beijo suave em {parceiro}." },
              { descricao: "Abra√ßo demorado", desafio: "{jogador}, repita o √∫ltimo abra√ßo demorado." },
              { descricao: "Carinho no rosto", desafio: "{jogador}, fa√ßa novamente o √∫ltimo carinho no rosto de {parceiro}." }
            ],
            jogador_mulher: [
              { descricao: "Abra√ßo apertado", desafio: "{jogador}, repita o √∫ltimo abra√ßo em {parceiro}." },
              { descricao: "M√£os dadas", desafio: "{jogador}, fa√ßa de novo o √∫ltimo carinho nas m√£os." },
              { descricao: "Beijo delicado", desafio: "{jogador}, repita o √∫ltimo beijo delicado em {parceiro}." },
              { descricao: "Olhar fofo", desafio: "{jogador}, repita o √∫ltimo olhar nos olhos." },
              { descricao: "Carinho no cabelo", desafio: "{jogador}, fa√ßa de novo o √∫ltimo carinho no cabelo de {parceiro}." }
            ],
            parceiro_homem: [
              { descricao: "Carinho extra", desafio: "Repita o √∫ltimo carinho que fez em {parceiro}." },
              { descricao: "Repetir carinho", desafio: "Deixe {parceiro} pedir para repetir um gesto de hoje." },
              { descricao: "Beijo de novo", desafio: "Pe√ßa a {parceiro} para repetir o √∫ltimo beijo que deu." },
              { descricao: "Abra√ßo novamente", desafio: "Deixe {parceiro} repetir o √∫ltimo abra√ßo." },
              { descricao: "Carinho guiado", desafio: "Pe√ßa a {parceiro} para repetir o √∫ltimo carinho que fez em voc√™." }
            ],
            parceiro_mulher: [
              { descricao: "Momento a dois", desafio: "Refa√ßa o √∫ltimo beijo dado em {parceiro}." },
              { descricao: "Massagem r√°pida", desafio: "Repita a √∫ltima massagem que fez em {parceiro}." },
              { descricao: "Beijo delicado", desafio: "Pe√ßa a {parceiro} para repetir um beijo delicado." },
              { descricao: "Carinho no rosto", desafio: "Deixe {parceiro} repetir o √∫ltimo carinho no seu rosto." },
              { descricao: "Abra√ßo fofo", desafio: "Pe√ßa a {parceiro} para repetir o √∫ltimo abra√ßo fofo." }
            ]
          },
          surpresa: {
            generico: [
              { descricao: "Surpresa carinhosa", desafio: "Surpresa! Troquem um beijo onde cada um escolher." },
              { descricao: "M√£os dadas", desafio: "Surpresa! Fiquem de olhos fechados, m√£os dadas." },
              { descricao: "Abra√ßo surpresa", desafio: "Surpresa! D√™ um abra√ßo apertado e mantenha o corpo colado." },
              { descricao: "Elogio surpresa", desafio: "Surpresa! Cada um diz um elogio r√°pido para o outro." },
              { descricao: "Carinho surpresa", desafio: "Surpresa! Fa√ßam carinhos no rosto." },
              { descricao: "Surpresa dupla", desafio: "Surpresa! Tres beijos rapidos em lugares diferentes. Ex: bochecha, testa, mao." },
              { descricao: "Surpresa respiro", desafio: "Surpresa! Segurem as maos e respirem juntos. Ex: 5 respiracoes lentas." },
              { descricao: "Surpresa elogio", desafio: "Surpresa! Cada um diz algo que admira no outro. Ex: \"gosto do seu sorriso\"." },
              { descricao: "Surpresa abraco", desafio: "Surpresa! Abraco por tras e beijo no pescoco. Ex: 5s de abraco colado." }
            ],
            jogador_homem: [
              { descricao: "Elogio rom√¢ntico", desafio: "{jogador}, surpresa: fa√ßa um elogio espec√≠fico e d√™ um beijo em {parceiro}." },
              { descricao: "Dan√ßa lenta", desafio: "{jogador}, surpresa: conduza {parceiro} para uma dan√ßa lenta." },
              { descricao: "Beijo surpresa", desafio: "{jogador}, surpresa: d√™ um beijo leve e diga algo fofo." },
              { descricao: "Carinho surpresa", desafio: "{jogador}, surpresa: fa√ßa um carinho no cabelo de {parceiro}." },
              { descricao: "Abra√ßo surpresa", desafio: "{jogador}, surpresa: abrace {parceiro}." }
            ],
            jogador_mulher: [
              { descricao: "Beijo na testa", desafio: "{jogador}, surpresa: d√™ um abra√ßo apertado e um beijo na testa de {parceiro}." },
              { descricao: "Carinho extra", desafio: "{jogador}, surpresa: sussurre algo carinhoso e beije {parceiro}." },
              { descricao: "Beijo surpresa", desafio: "{jogador}, surpresa: d√™ um beijo na bochecha e sorria." },
              { descricao: "Elogio surpresa", desafio: "{jogador}, surpresa: fa√ßa um elogio r√°pido e abrace {parceiro}." },
              { descricao: "Carinho leve", desafio: "{jogador}, surpresa: fa√ßa um carinho no rosto de {parceiro}." }
            ],
            parceiro_homem: [
              { descricao: "Surpresa carinhosa", desafio: "Surpresa: {parceiro} escolhe um beijo extra agora." },
              { descricao: "Massagem r√°pida", desafio: "Surpresa: fa√ßa uma massagem r√°pida em {parceiro} e diga por que gosta de {ele_ela_parceiro}." },
              { descricao: "Abra√ßo surpresa", desafio: "Surpresa: deixe {parceiro} te dar um abra√ßo colado." },
              { descricao: "Beijo surpresa", desafio: "Surpresa: {parceiro} escolhe um beijo para receber agora." },
              { descricao: "Carinho surpresa", desafio: "Surpresa: deixe {parceiro} fazer um carinho no seu rosto." }
            ],
            parceiro_mulher: [
              { descricao: "Carinho extra", desafio: "Surpresa: {parceiro} escolhe um carinho extra agora." },
              { descricao: "Surpresa carinhosa", desafio: "Surpresa: olhe para {parceiro} e diga algo que te encanta." },
              { descricao: "Beijo surpresa", desafio: "Surpresa: deixe {parceiro} te dar um beijo onde quiser." },
              { descricao: "Abra√ßo surpresa", desafio: "Surpresa: pe√ßa a {parceiro} um abra√ßo apertado." },
              { descricao: "Carinho surpresa", desafio: "Surpresa: {parceiro} faz um carinho no seu cabelo." }
            ]
          }
        }
      },
      intenso: {
        tabuleiro: [
          "inicio", "acao", "surpresa", "acao", "acao", "acao",
          "escolha", "surpresa", "acao", "acao", "acao", "acao",
          "acao", "surpresa", "escolha", "acao", "acao", "acao",
          "surpresa", "acao", "acao", "acao", "acao", "final"
        ],
        desafios: {
          acao: {
            generico: [
              { descricao: "Momento a dois", desafio: "Beije o pesco√ßo de {parceiro}." },
              { descricao: "M√£os dadas", desafio: "Passe as m√£os lentamente pelas costas de {parceiro}." },
              { descricao: "Corpo colado", desafio: "Encostem os corpos e mantenham a press√£o." },
              { descricao: "Contato quente", desafio: "Encostem os corpos e fa√ßam toques em √°rea combinada." },
              { descricao: "Beijo demorado", desafio: "D√™ um beijo demorado em {parceiro} e mantenha o corpo colado." },
              { descricao: "Nuca combinada", desafio: "Segurem a nuca um do outro enquanto se beijam." },
              { descricao: "Olhar intenso", desafio: "Fiquem bem pr√≥ximos e mantenham o olhar." },
              { descricao: "Beijos intimos", desafio: "Beijem o sexo um do outro sem roupa." },
              { descricao: "Masturbacao mutua", desafio: "Fa√ßam masturbacao mutua." },
              { descricao: "Caricia por cima", desafio: "Caricias na virilha por cima da roupa enquanto se beijam." }
            ],
            jogador_homem: [
              { descricao: "Momento a dois", desafio: "{jogador}, fa√ßa uma mordida leve no ombro de {parceiro}." },
              { descricao: "Provoca√ß√£o", desafio: "{jogador}, sussurre algo provocante no ouvido de {parceiro}. Ex: diga que quer a boca de {parceiro} e a mao de {parceiro} te tocando por baixo da roupa." },
              { descricao: "Beijo quente", desafio: "{jogador}, d√™ um beijo intenso em {parceiro}." },
              { descricao: "Nuca e puxada", desafio: "{jogador}, segure a nuca de {parceiro} e puxe para um beijo intenso." },
              { descricao: "Sussurro direto", desafio: "{jogador}, sussurre o que quer fazer com {parceiro}. Ex: diga que quer beijo intenso e dedos no sexo." },
              { descricao: "Beijo intimo", desafio: "{jogador}, d√™ um beijo no sexo de {parceiro} por cima da roupa." },
              { descricao: "Sexo oral", desafio: "{jogador}, fa√ßa sexo oral em {parceiro}." },
              { descricao: "Mao direta", desafio: "{jogador}, segure o sexo de {parceiro} sem roupa enquanto beija." }
            ],
            jogador_mulher: [
              { descricao: "Beijo no pesco√ßo", desafio: "{jogador}, d√™ um beijo provocante no pesco√ßo de {parceiro}." },
              { descricao: "Toque sensual", desafio: "{jogador}, fa√ßa um toque lento nas costas de {parceiro}." },
              { descricao: "Toque na coxa", desafio: "{jogador}, fa√ßa car√≠cias na coxa de {parceiro} por cima da roupa." },
              { descricao: "Nuca e beijo intenso", desafio: "{jogador}, pegue na nuca de {parceiro} e d√™ um beijo intenso." },
              { descricao: "Olhar provocante", desafio: "{jogador}, encoste o rosto e diga algo provocante a {parceiro}. Ex: diga que quer beijo intenso e {parceiro} te tocando no sexo." },
              { descricao: "Beijo intimo", desafio: "{jogador}, d√™ um beijo no sexo de {parceiro} sem roupa." },
              { descricao: "Sexo oral", desafio: "{jogador}, fa√ßa sexo oral em {parceiro}." },
              { descricao: "Caricia direta", desafio: "{jogador}, acaricie o sexo de {parceiro} por cima da roupa enquanto beija." }
            ],
            parceiro_homem: [
              { descricao: "M√£os dadas", desafio: "Deixe {parceiro} guiar suas m√£os." },
              { descricao: "Momento a dois", desafio: "D√™ um beijo demorado em {parceiro} e encoste o corpo." },
              { descricao: "Beijo guiado", desafio: "Deixe {parceiro} conduzir um beijo mais intenso." },
              { descricao: "Abra√ßo guiado", desafio: "Pe√ßa a {parceiro} para te puxar pela cintura enquanto voc√™ encosta o corpo." },
              { descricao: "Sussurro", desafio: "Pe√ßa a {parceiro} para sussurrar algo provocante no seu ouvido. Ex: pedir sexo oral ou um beijo no sexo." },
              { descricao: "Pedido intimo", desafio: "Pe√ßa a {parceiro} um beijo no seu sexo por cima da roupa." },
              { descricao: "Pedido oral", desafio: "Pe√ßa a {parceiro} para fazer sexo oral." },
              { descricao: "Pedido toque", desafio: "Pe√ßa a {parceiro} para te tocar por baixo da roupa." }
            ],
            parceiro_mulher: [
              { descricao: "Escolha do parceiro", desafio: "Deixe {parceiro} escolher onde receber car√≠cias." },
              { descricao: "Massagem r√°pida", desafio: "Fa√ßa uma massagem sensual nas coxas de {parceiro} por cima da roupa." },
              { descricao: "Beijo guiado", desafio: "Deixe {parceiro} guiar um beijo mais demorado." },
              { descricao: "Aproxima√ß√£o guiada", desafio: "Aproxime o corpo enquanto {parceiro} segura sua nuca e puxa para perto." },
              { descricao: "Olhar quente", desafio: "Encoste a testa em {parceiro} e diga algo provocante. Ex: diga que quer beijos e a mao de {parceiro} no seu sexo." },
              { descricao: "Beijo intimo", desafio: "D√™ um beijo no sexo de {parceiro} sem roupa." },
              { descricao: "Sexo oral", desafio: "Fa√ßa sexo oral em {parceiro}." },
              { descricao: "Caricia direta", desafio: "Acaricie o sexo de {parceiro} por cima da roupa enquanto beija." }
            ]
          },
          bonus: {
            generico: [
              { descricao: "Roupa a menos", desafio: "Tirem uma pe√ßa de roupa cada um." },
              { descricao: "Momento a dois", desafio: "Car√≠cias livres por onde {parceiro} quiser." },
              { descricao: "Pe√ßa combinada", desafio: "Tirem uma pe√ßa combinada e continuem com toques intensos." },
              { descricao: "Toque combinado", desafio: "Beijo intenso com toques em √°rea combinada." },
              { descricao: "Carinho ousado", desafio: "Fa√ßam car√≠cias mais intensas. Ex: m√£os nas costas e dedos pressionando o sexo por cima da roupa." },
              { descricao: "Beijo b√¥nus", desafio: "Ganhem um beijo longo com o corpo colado." },
              { descricao: "Toque b√¥nus", desafio: "Passe as m√£os pelas costas de {parceiro} e deslize para o sexo por cima da roupa." },
              { descricao: "Oral rapido", desafio: "Sexo oral rapido, revezando." },
              { descricao: "Masturbacao mutua", desafio: "Masturbacao mutua, alternando." },
              { descricao: "Caricia por baixo", desafio: "Caricias no sexo por baixo da roupa." }
            ],
            jogador_homem: [
              { descricao: "Toque sensual", desafio: "{jogador}, pe√ßa um toque sensual de {parceiro}." },
              { descricao: "Beijo longo", desafio: "{jogador}, receba um beijo longo e lento de {parceiro}." },
              { descricao: "Carinho dirigido", desafio: "{jogador}, pe√ßa a {parceiro} para segurar sua nuca enquanto voc√™ encosta o corpo." },
              { descricao: "Elogio quente", desafio: "{jogador}, pe√ßa um elogio mais provocante de {parceiro}. Ex: pe√ßa um elogio sobre seu gosto ou sobre como voce faz sexo oral." },
              { descricao: "Tapinha leve", desafio: "{jogador}, pe√ßa a {parceiro} um tapinha leve na raba." },
              { descricao: "Pedido oral", desafio: "{jogador}, pe√ßa a {parceiro} sexo oral." },
              { descricao: "Masturbacao", desafio: "{jogador}, pe√ßa a {parceiro} para te masturbar sem roupa." },
              { descricao: "Caricia intima", desafio: "{jogador}, pe√ßa caricias no seu sexo por cima da roupa." }
            ],
            jogador_mulher: [
              { descricao: "Carinho extra", desafio: "{jogador}, escolha uma regi√£o para receber carinhos." },
              { descricao: "Massagem r√°pida", desafio: "{jogador}, ganhe uma massagem na coxa de {parceiro}." },
              { descricao: "Contato colado", desafio: "{jogador}, receba um abra√ßo colado enquanto {parceiro} segura sua nuca." },
              { descricao: "Toque direto", desafio: "{jogador}, pe√ßa um toque mais direto onde quiser. Ex: coxas ou dedos pressionando o sexo por cima da roupa." },
              { descricao: "Abra√ßo colado", desafio: "{jogador}, ganhe um abra√ßo colado com beijos leves." },
              { descricao: "Pedido oral", desafio: "{jogador}, pe√ßa a {parceiro} sexo oral." },
              { descricao: "Masturbacao", desafio: "{jogador}, pe√ßa a {parceiro} para te masturbar por cima da roupa." },
              { descricao: "Caricia intima", desafio: "{jogador}, pe√ßa caricias no seu sexo por baixo da roupa." }
            ],
            parceiro_homem: [
              { descricao: "Momento a dois", desafio: "{parceiro} pode pedir um beijo onde {ele_ela_parceiro} quiser." },
              { descricao: "Carinho extra", desafio: "D√™ a {parceiro} carinhos sem pressa." },
              { descricao: "Beijo b√¥nus", desafio: "D√™ a {parceiro} um beijo intenso e demorado." },
              { descricao: "Toque b√¥nus", desafio: "Fa√ßa car√≠cias mais ousadas nas costas de {parceiro}. Ex: m√£os firmes descendo e apertando o sexo por cima da roupa." },
              { descricao: "Provoca√ß√£o leve", desafio: "Sussurre algo provocante e d√™ um beijo em {parceiro}. Ex: sussurre que quer {parceiro} te tocando por baixo da roupa." },
              { descricao: "Beijo intimo", desafio: "D√™ a {parceiro} um beijo no sexo por cima da roupa." },
              { descricao: "Sexo oral", desafio: "Fa√ßa sexo oral em {parceiro}." },
              { descricao: "Caricia intima", desafio: "Acaricie o sexo de {parceiro} sem roupa." }
            ],
            parceiro_mulher: [
              { descricao: "Roupa a menos", desafio: "{parceiro} escolhe a pr√≥xima pe√ßa de roupa a tirar." },
              { descricao: "Massagem r√°pida", desafio: "Fa√ßa uma massagem lenta nos ombros de {parceiro}." },
              { descricao: "Beijo b√¥nus", desafio: "D√™ a {parceiro} um beijo longo e intenso." },
              { descricao: "Carinho ousado", desafio: "Fa√ßa car√≠cias mais intensas nas costas de {parceiro}. Ex: m√£os nas costas e dedos pressionando o sexo por cima da roupa." },
              { descricao: "Momento quente", desafio: "Deixe {parceiro} receber beijos e car√≠cias." },
              { descricao: "Beijo intimo", desafio: "D√™ a {parceiro} um beijo no sexo sem roupa." },
              { descricao: "Sexo oral", desafio: "Fa√ßa sexo oral em {parceiro}." },
              { descricao: "Caricia intima", desafio: "Acaricie o sexo de {parceiro} por cima da roupa." }
            ]
          },
          escolha: {
            generico: [
              { descricao: "Beijo no pesco√ßo", desafio: "Escolha: beijo no pesco√ßo OU mordida leve em {parceiro}." },
              { descricao: "Massagem r√°pida", desafio: "Escolha: massagem sensual OU dan√ßa provocante para {parceiro}. Ex: dan√ßa colada com maos no sexo por cima da roupa." },
              { descricao: "Beijo ou nuca", desafio: "Escolha: beijo demorado OU segurar a nuca de {parceiro}." },
              { descricao: "Olhar ou sussurro", desafio: "Escolha: olhar intenso OU sussurrar algo provocante. Ex: sussurrar que quer dedos no sexo." },
              { descricao: "Car√≠cias ou beijo", desafio: "Escolha: car√≠cias nas costas OU beijo longo em {parceiro}." },
              { descricao: "Oral ou toque", desafio: "Escolha: sexo oral OU caricias no sexo por cima da roupa." },
              { descricao: "Masturbacao ou beijo", desafio: "Escolha: masturbacao mutua sem roupa OU beijo intenso." },
              { descricao: "Beijo intimo", desafio: "Escolha: beijo no sexo sem roupa OU beijo no pesco√ßo." },
              { descricao: "Ombro ou nuca", desafio: "Escolha: mordida leve no ombro OU beijo lento na nuca. Ex: segure a nuca e aproxime." },
              { descricao: "Coxa ou pescoco", desafio: "Escolha: toque na coxa por cima da roupa OU beijo no pescoco. Ex: caricia por 20s." },
              { descricao: "Sussurro ou toque", desafio: "Escolha: sussurrar algo ousado OU toque lento nas costas. Ex: diga onde quer ser tocado." },
              { descricao: "Pressao ou carinho", desafio: "Escolha: abraco colado com pressao OU caricias nas costas. Ex: maos subindo e descendo." }
            ],
            jogador_homem: [
              { descricao: "Escolha do parceiro", desafio: "{jogador}, escolha: tirar sua camisa OU tirar a de {parceiro}." },
              { descricao: "Escolha do parceiro", desafio: "{jogador}, escolha: sussurrar provoca√ß√µes OU demonstrar com toques. Ex: sussurrar que quer beijo intenso ou dedos por baixo da roupa." },
              { descricao: "Beijo ou mordida", desafio: "{jogador}, escolha: beijo intenso OU mordida leve no pesco√ßo de {parceiro}." },
              { descricao: "Toque ou abra√ßo", desafio: "{jogador}, escolha: toques nas costas OU abra√ßo colado." },
              { descricao: "Comando ou pedido", desafio: "{jogador}, escolha: dar um comando provocante OU pedir um beijo demorado. Ex: pe√ßa um beijo intenso e dedos no seu sexo." },
              { descricao: "Oral ou masturbacao", desafio: "{jogador}, escolha: sexo oral OU masturbacao mutua." },
              { descricao: "Intimo ou beijo", desafio: "{jogador}, escolha: beijo no sexo por cima da roupa OU beijo intenso." },
              { descricao: "Caricia por baixo", desafio: "{jogador}, escolha: caricias no sexo por baixo da roupa OU tapinha leve na raba." }
            ],
            jogador_mulher: [
              { descricao: "Beijo longo", desafio: "{jogador}, escolha: beijo longo OU car√≠cias nas costas de {parceiro}." },
              { descricao: "Carinho extra", desafio: "{jogador}, escolha: beijos OU carinhos." },
              { descricao: "Toque ou beijo", desafio: "{jogador}, escolha: toques nas costas OU beijo no pesco√ßo de {parceiro}." },
              { descricao: "Provoca√ß√£o leve", desafio: "{jogador}, escolha: sussurrar algo ousado OU morder de leve o ombro. Ex: sussurrar que quer sua boca no corpo e dedos no sexo." },
              { descricao: "Ritmo ou calma", desafio: "{jogador}, escolha: beijo r√°pido e intenso OU beijo lento e profundo." },
              { descricao: "Oral ou masturbacao", desafio: "{jogador}, escolha: sexo oral OU masturbacao mutua." },
              { descricao: "Intimo ou beijo", desafio: "{jogador}, escolha: beijo no sexo sem roupa OU beijo intenso." },
              { descricao: "Caricia por baixo", desafio: "{jogador}, escolha: caricias no sexo por baixo da roupa OU tapinha leve na raba." }
            ],
            parceiro_homem: [
              { descricao: "Momento a dois", desafio: "Pergunte a {parceiro} se {ele_ela_parceiro} prefere beijos OU car√≠cias." },
              { descricao: "Escolha do parceiro", desafio: "Deixe {parceiro} escolher a posi√ß√£o para o pr√≥ximo momento." },
              { descricao: "Beijo escolhido", desafio: "Deixe {parceiro} escolher entre beijo intenso OU car√≠cias nas costas." },
              { descricao: "Toque escolhido", desafio: "Pe√ßa a {parceiro} para escolher: toques lentos OU beijos r√°pidos." },
              { descricao: "Ritmo escolhido", desafio: "Deixe {parceiro} escolher o ritmo dos beijos." },
              { descricao: "Escolha intima", desafio: "Deixe {parceiro} escolher: sexo oral OU masturbacao mutua." },
              { descricao: "Escolha por baixo", desafio: "Deixe {parceiro} escolher: caricias no sexo por baixo da roupa OU beijo intenso." },
              { descricao: "Escolha beijo", desafio: "Deixe {parceiro} escolher: beijo no sexo sem roupa OU beijo no pesco√ßo." }
            ],
            parceiro_mulher: [
              { descricao: "Escolha do parceiro", desafio: "Deixe {parceiro} escolher: beijos lentos OU toques provocantes. Ex: maos nas costas e dedos no sexo por cima da roupa." },
              { descricao: "Beijo no pesco√ßo", desafio: "Ofere√ßa a {parceiro} a escolha entre abra√ßo colado OU beijos no pesco√ßo." },
              { descricao: "Toque escolhido", desafio: "Deixe {parceiro} escolher: toques nas costas OU car√≠cias na nuca." },
              { descricao: "Beijo escolhido", desafio: "Ofere√ßa a {parceiro} a escolha entre beijo intenso OU beijo demorado." },
              { descricao: "Comando leve", desafio: "Deixe {parceiro} escolher um comando provocante para voc√™ cumprir. Ex: {parceiro} pedir um beijo intenso e um toque direto." },
              { descricao: "Escolha intima", desafio: "Deixe {parceiro} escolher: sexo oral OU masturbacao mutua." },
              { descricao: "Escolha por baixo", desafio: "Deixe {parceiro} escolher: caricias no sexo por cima da roupa OU beijo intenso." },
              { descricao: "Escolha beijo", desafio: "Deixe {parceiro} escolher: beijo no sexo por cima da roupa OU beijo no pesco√ßo." }
            ]
          },
          repeticao: {
            generico: [
              { descricao: "Repetir carinho", desafio: "Repita o √∫ltimo toque sensual que recebeu." },
              { descricao: "Provoca√ß√£o", desafio: "Recrie o momento mais provocante at√© agora. Ex: repita a caricia no sexo ou o sexo oral que mais gostaram." },
              { descricao: "Beijo intenso", desafio: "Repitam o √∫ltimo beijo mais intenso." },
              { descricao: "Toque na nuca", desafio: "Repitam o √∫ltimo toque na nuca." },
              { descricao: "Olhar quente", desafio: "Repitam o √∫ltimo olhar intenso." },
              { descricao: "Intimo repetido", desafio: "Repitam a ultima caricia no sexo por baixo da roupa." },
              { descricao: "Oral repetido", desafio: "Repitam o ultimo sexo oral." },
              { descricao: "Masturbacao repetida", desafio: "Repitam a ultima masturbacao mutua sem roupa." }
            ],
            jogador_homem: [
              { descricao: "Beijo longo", desafio: "{jogador}, repita o √∫ltimo beijo longo em {parceiro}." },
              { descricao: "Carinho extra", desafio: "{jogador}, fa√ßa de novo o √∫ltimo carinho na coxa de {parceiro}." },
              { descricao: "Toque sensual", desafio: "{jogador}, repita o √∫ltimo toque sensual nas costas de {parceiro}." },
              { descricao: "Beijo no pesco√ßo", desafio: "{jogador}, repita o √∫ltimo beijo no pesco√ßo de {parceiro}." },
              { descricao: "Sussurro", desafio: "{jogador}, repita o √∫ltimo sussurro provocante. Ex: repita que quer dedos por baixo da roupa." },
              { descricao: "Beijo intimo", desafio: "{jogador}, repita o ultimo beijo no sexo de {parceiro} por cima da roupa." },
              { descricao: "Oral", desafio: "{jogador}, repita o ultimo sexo oral em {parceiro}." },
              { descricao: "Masturbacao", desafio: "{jogador}, repita a ultima masturbacao em {parceiro} sem roupa." }
            ],
            jogador_mulher: [
              { descricao: "Beijo no pesco√ßo", desafio: "{jogador}, repita o √∫ltimo beijo no pesco√ßo." },
              { descricao: "Toque sensual", desafio: "{jogador}, fa√ßa novamente o √∫ltimo toque lento." },
              { descricao: "Beijo intenso", desafio: "{jogador}, repita o √∫ltimo beijo intenso em {parceiro}." },
              { descricao: "Carinho na nuca", desafio: "{jogador}, repita o √∫ltimo carinho na nuca de {parceiro}." },
              { descricao: "Olhar provocante", desafio: "{jogador}, repita o √∫ltimo olhar provocante. Ex: olhando bem perto e mordendo o labio." },
              { descricao: "Beijo intimo", desafio: "{jogador}, repita o ultimo beijo no sexo de {parceiro} sem roupa." },
              { descricao: "Oral", desafio: "{jogador}, repita o ultimo sexo oral em {parceiro}." },
              { descricao: "Masturbacao", desafio: "{jogador}, repita a ultima masturbacao em {parceiro} por cima da roupa." }
            ],
            parceiro_homem: [
              { descricao: "Momento a dois", desafio: "Refa√ßa o √∫ltimo beijo dado em {parceiro}." },
              { descricao: "Repetir carinho", desafio: "Deixe {parceiro} pedir para repetir um toque." },
              { descricao: "Beijo pedido", desafio: "Deixe {parceiro} pedir para repetir um beijo intenso." },
              { descricao: "Toque pedido", desafio: "Pe√ßa a {parceiro} para repetir um toque nas suas costas." },
              { descricao: "Sussurro pedido", desafio: "Deixe {parceiro} repetir um sussurro provocante. Ex: pedir um beijo intenso e um toque direto." },
              { descricao: "Intimo pedido", desafio: "Deixe {parceiro} repetir a ultima caricia no sexo por baixo da roupa." },
              { descricao: "Oral pedido", desafio: "Deixe {parceiro} repetir o ultimo sexo oral." },
              { descricao: "Masturbacao pedida", desafio: "Pe√ßa a {parceiro} para repetir a ultima masturbacao mutua." }
            ],
            parceiro_mulher: [
              { descricao: "Repetir carinho", desafio: "Repita o √∫ltimo gesto sensual com {parceiro}." },
              { descricao: "Repetir carinho", desafio: "Deixe {parceiro} escolher algo para repetir." },
              { descricao: "Beijo repetido", desafio: "Pe√ßa a {parceiro} para repetir o √∫ltimo beijo intenso." },
              { descricao: "Toque repetido", desafio: "Deixe {parceiro} repetir o √∫ltimo toque nas suas costas." },
              { descricao: "Momento repetido", desafio: "Pe√ßa a {parceiro} para repetir o √∫ltimo momento provocante. Ex: beijo intenso com caricias no sexo." },
              { descricao: "Intimo repetido", desafio: "Pe√ßa a {parceiro} para repetir a ultima caricia no sexo por cima da roupa." },
              { descricao: "Oral repetido", desafio: "Pe√ßa a {parceiro} para repetir o ultimo sexo oral." },
              { descricao: "Masturbacao repetida", desafio: "Pe√ßa a {parceiro} para repetir a ultima masturbacao mutua." }
            ]
          },
          surpresa: {
            generico: [
              { descricao: "Surpresa carinhosa", desafio: "Surpresa! Beijos sem parar." },
              { descricao: "Surpresa carinhosa", desafio: "Surpresa! Olhares intensos e toque leve." },
              { descricao: "Surpresa quente", desafio: "Surpresa! Beijo intenso com o corpo colado." },
              { descricao: "Surpresa provocante", desafio: "Surpresa! Sussurrem algo ousado um para o outro. Ex: sussurrem que querem beijos e dedos no sexo agora." },
              { descricao: "Surpresa toque", desafio: "Surpresa! Segurem a nuca um do outro e beijem." },
              { descricao: "Surpresa oral", desafio: "Surpresa! Sexo oral rapido." },
              { descricao: "Surpresa intima", desafio: "Surpresa! Caricias no sexo por baixo da roupa." },
              { descricao: "Surpresa masturbacao", desafio: "Surpresa! Masturbacao mutua sem roupa." },
              { descricao: "Surpresa nuca", desafio: "Surpresa! Beijo longo com maos na nuca. Ex: 15s de beijo." },
              { descricao: "Surpresa toque", desafio: "Surpresa! Toques provocantes por cima da roupa. Ex: 20s de caricia." },
              { descricao: "Surpresa corpo", desafio: "Surpresa! Encostem o corpo e sussurrem algo ousado. Ex: diga onde quer ser tocado." },
              { descricao: "Surpresa coxa", desafio: "Surpresa! Caricia na coxa + beijo no pescoco. Ex: alternar toque e beijo." }
            ],
            jogador_homem: [
              { descricao: "Surpresa carinhosa", desafio: "{jogador}, surpresa: beije {parceiro} lentamente e encoste o corpo." },
              { descricao: "Surpresa carinhosa", desafio: "{jogador}, surpresa: toque nas costas de {parceiro} e sussurre algo ousado. Ex: diga que quer um beijo intenso e um toque por baixo da roupa." },
              { descricao: "Surpresa beijo", desafio: "{jogador}, surpresa: d√™ um beijo intenso e puxe {parceiro} para perto." },
              { descricao: "Surpresa provocante", desafio: "{jogador}, surpresa: diga algo provocante no ouvido de {parceiro}. Ex: diga que quer a boca de {parceiro} e a mao {ele_ela_parceiro} no seu sexo." },
              { descricao: "Surpresa toque", desafio: "{jogador}, surpresa: segure a nuca de {parceiro} enquanto {parceiro} passa as m√£os nas suas costas." },
              { descricao: "Surpresa oral", desafio: "{jogador}, surpresa: fa√ßa sexo oral em {parceiro}." },
              { descricao: "Surpresa intima", desafio: "{jogador}, surpresa: toque o sexo de {parceiro} por baixo da roupa." },
              { descricao: "Surpresa masturbacao", desafio: "{jogador}, surpresa: masturbe {parceiro} sem roupa." }
            ],
            jogador_mulher: [
              { descricao: "Surpresa carinhosa", desafio: "{jogador}, surpresa: d√™ um beijo provocante e um sorriso. Ex: beijo no pesco√ßo e uma mordida leve." },
              { descricao: "Carinho extra", desafio: "{jogador}, surpresa: fa√ßa um carinho lento na nuca de {parceiro}." },
              { descricao: "Surpresa beijo", desafio: "{jogador}, surpresa: d√™ um beijo intenso e encoste o corpo." },
              { descricao: "Surpresa sussurro", desafio: "{jogador}, surpresa: sussurre algo ousado no ouvido de {parceiro}. Ex: diga que quer beijos e dedos no sexo." },
              { descricao: "Surpresa toque", desafio: "{jogador}, surpresa: fa√ßa um toque lento nas costas de {parceiro}." },
              { descricao: "Surpresa oral", desafio: "{jogador}, surpresa: fa√ßa sexo oral em {parceiro}." },
              { descricao: "Surpresa intima", desafio: "{jogador}, surpresa: acaricie o sexo de {parceiro} por cima da roupa." },
              { descricao: "Surpresa masturbacao", desafio: "{jogador}, surpresa: masturbe {parceiro} por cima da roupa." }
            ],
            parceiro_homem: [
              { descricao: "Surpresa carinhosa", desafio: "Surpresa: {parceiro} escolhe um beijo extra agora." },
              { descricao: "Abra√ßo apertado", desafio: "Surpresa: fa√ßa um abra√ßo colado e diga algo que te provoca em {parceiro}. Ex: diga que quer um beijo intenso e um toque direto." },
              { descricao: "Surpresa beijo", desafio: "Surpresa: deixe {parceiro} te dar um beijo intenso." },
              { descricao: "Surpresa toque", desafio: "Surpresa: deixe {parceiro} fazer car√≠cias nas suas costas." },
              { descricao: "Surpresa sussurro", desafio: "Surpresa: pe√ßa a {parceiro} um sussurro provocante. Ex: pedir um beijo intenso e dedos por baixo da roupa." },
              { descricao: "Surpresa oral", desafio: "Surpresa: pe√ßa a {parceiro} sexo oral." },
              { descricao: "Surpresa intima", desafio: "Surpresa: deixe {parceiro} tocar seu sexo por baixo da roupa." },
              { descricao: "Surpresa masturbacao", desafio: "Surpresa: pe√ßa a {parceiro} uma masturbacao lenta sem roupa." }
            ],
            parceiro_mulher: [
              { descricao: "Carinho extra", desafio: "Surpresa: {parceiro} escolhe onde receber carinhos." },
              { descricao: "Surpresa carinhosa", desafio: "Surpresa: d√™ um beijo lento e diga algo que te provoca em {parceiro}. Ex: diga que quer beijos intensos e caricias no sexo." },
              { descricao: "Surpresa beijo", desafio: "Surpresa: deixe {parceiro} te dar um beijo intenso." },
              { descricao: "Surpresa toque", desafio: "Surpresa: deixe {parceiro} fazer car√≠cias nas suas costas." },
              { descricao: "Surpresa provocante", desafio: "Surpresa: pe√ßa a {parceiro} para dizer algo ousado. Ex: pedir caricias no sexo ou sexo oral." },
              { descricao: "Surpresa oral", desafio: "Surpresa: pe√ßa a {parceiro} sexo oral." },
              { descricao: "Surpresa intima", desafio: "Surpresa: deixe {parceiro} acariciar seu sexo por cima da roupa." },
              { descricao: "Surpresa masturbacao", desafio: "Surpresa: pe√ßa a {parceiro} uma masturbacao lenta por cima da roupa." }
            ]
          }
        }
      },
    };

    // Efeitos poss√≠veis para casas surpresa
    const efeitosSurpresa = [];

    // √çcones por tipo de casa
    const iconesCasa = {
      inicio: 'üèÅ',
      final: 'üèÜ',
      acao: 'üí´',
      bonus: 'üéÅ',
      escolha: 'üîÄ',
      repeticao: 'üîÑ',
      surpresa: '‚ùì'
    };

    /* ============================================
       ESTADO DO JOGO
    ============================================ */
    const state = {
      paginaAtual: 'nomes',
      nome1: '',
      nome2: '',
      sexo1: '',
      sexo2: '',
      emoji1: '',
      emoji2: '',
      nivel: null,
      posicaoJ1: 0,
      posicaoJ2: 0,
      jogadorAtual: 1,
      ultimoJogador: null,
      perdeVezJ1: false,
      perdeVezJ2: false,
      travado: false,
      desafioAtual: null,
      efeitoAtual: null,
      casasDesafios: [], // Armazena o preview de cada casa
      desafiosPools: {} // Pools embaralhados por tipo/alvo
    };

    /* ============================================
       M√ìDULO: STORAGE
    ============================================ */
    const Storage = {
      CHAVE: 'jogoCasal_save',

      salvar() {
        const dados = {
          nome1: state.nome1,
          nome2: state.nome2,
          sexo1: state.sexo1,
          sexo2: state.sexo2,
          emoji1: state.emoji1,
          emoji2: state.emoji2,
          nivel: state.nivel,
          posicaoJ1: state.posicaoJ1,
          posicaoJ2: state.posicaoJ2,
          jogadorAtual: state.jogadorAtual,
          perdeVezJ1: state.perdeVezJ1,
          perdeVezJ2: state.perdeVezJ2,
          casasDesafios: state.casasDesafios,
          desafiosPools: state.desafiosPools
        };
        localStorage.setItem(this.CHAVE, JSON.stringify(dados));
      },

      carregar() {
        const dados = localStorage.getItem(this.CHAVE);
        return dados ? JSON.parse(dados) : null;
      },

      existe() {
        const dados = this.carregar();
        return !!(dados && dados.sexo1 && dados.sexo2 && dados.emoji1 && dados.emoji2 && dados.nivel);
      },

      apagar() {
        localStorage.removeItem(this.CHAVE);
      }
    };

    /* ============================================
       M√ìDULO: UI
    ============================================ */
    const UI = {
      // Elementos da p√°gina de nomes
      inputNome1: document.getElementById('nome1'),
      selectSexo1: document.getElementById('sexo1'),
      emojiInput1: document.getElementById('emoji1'),
      emojiGrid1: document.getElementById('emojiGrid1'),
      inputNome2: document.getElementById('nome2'),
      selectSexo2: document.getElementById('sexo2'),
      emojiInput2: document.getElementById('emoji2'),
      emojiGrid2: document.getElementById('emojiGrid2'),
      btnAvancar: document.getElementById('btnAvancar'),
      btnPreencher: document.getElementById('btnPreencher'),
      btnContinuar: document.getElementById('btnContinuar'),
      btnApagar: document.getElementById('btnApagar'),
      emojiList: ['‚ôÄ', '‚ôÇ', '‚ôÄÔ∏è', '‚ôÇÔ∏è'],

      // Elementos da p√°gina de n√≠vel
      nomesEscolhidos: document.getElementById('nomesEscolhidos'),
      btnsNivel: document.querySelectorAll('.btn-nivel'),
      btnVoltar: document.getElementById('btnVoltar'),
      btnIniciar: document.getElementById('btnIniciar'),

      // Elementos da p√°gina do jogo
      tabuleiro: document.getElementById('tabuleiro'),
      ultimoJogador: document.getElementById('ultimoJogador'),
      jogadorAtual: document.getElementById('jogadorAtual'),
      placar: document.getElementById('placar'),
      btnDado: document.getElementById('btnDado'),
      btnReiniciar: document.getElementById('btnReiniciar'),

      // Modal
      modalVitoria: document.getElementById('modalVitoria'),
      vencedorNome: document.getElementById('vencedorNome'),
      btnJogarNovamente: document.getElementById('btnJogarNovamente'),
      btnVoltarMenu: document.getElementById('btnVoltarMenu'),

      // P√°ginas
      paginas: document.querySelectorAll('.page'),

      mostrarPagina(id) {
        this.paginas.forEach(p => p.classList.remove('is-active'));
        document.getElementById(id).classList.add('is-active');
      },

      atualizarBotaoAvancar() {
        const nome1 = this.inputNome1.value.trim();
        const nome2 = this.inputNome2.value.trim();
        const sexo1 = this.selectSexo1.value;
        const sexo2 = this.selectSexo2.value;
        const emoji1 = this.emojiInput1.value;
        const emoji2 = this.emojiInput2.value;
        this.btnAvancar.disabled = !nome1 || !nome2 || !sexo1 || !sexo2 || !emoji1 || !emoji2;
      },

      mostrarBotoesSave(existe) {
        this.btnContinuar.classList.toggle('hidden', !existe);
        this.btnApagar.classList.toggle('hidden', !existe);
      },

      atualizarNomesNivel() {
        this.nomesEscolhidos.innerHTML = 
          `<span class="texto-destaque">${state.nome1}</span> & <span class="texto-destaque">${state.nome2}</span>`;
      },

      selecionarNivel(nivel) {
        this.btnsNivel.forEach(btn => {
          btn.classList.toggle('selected', btn.dataset.nivel === nivel);
        });
        this.btnIniciar.disabled = !nivel;
      },

      aplicarTema(nivel) {
        document.body.className = `tema-${nivel}`;
      },

      renderEmojiGrid(container, alvoId) {
        container.innerHTML = this.emojiList.map(emoji => (
          `<button type="button" class="emoji-btn" data-emoji="${emoji}" data-alvo="${alvoId}" aria-label="Emoji ${emoji}">${emoji}</button>`
        )).join('');
        container.querySelectorAll('.emoji-btn').forEach(btn => {
          btn.addEventListener('click', () => {
            this.selecionarEmoji(alvoId, btn.dataset.emoji);
            this.atualizarBotaoAvancar();
          });
        });
      },

      selecionarEmoji(alvoId, emoji) {
        const input = document.getElementById(alvoId);
        if (!input) return;
        input.value = emoji;
        const grid = alvoId === 'emoji1' ? this.emojiGrid1 : this.emojiGrid2;
        if (grid) {
          grid.querySelectorAll('.emoji-btn').forEach(btn => {
            btn.classList.toggle('selected', btn.dataset.emoji === emoji);
          });
        }
      },

      // Calcula posi√ß√µes no per√≠metro do grid 7x7 (estilo Monopoly)
      calcularPosicoesMopolyBoard(numCasas) {
        const posicoes = [];
        
        // Linha superior (esquerda -> direita): row 0, cols 0-6
        for (let col = 0; col < 7; col++) {
          posicoes.push({ row: 0, col: col });
        }
        // Lateral direita (cima -> baixo): col 6, rows 1-5
        for (let row = 1; row < 6; row++) {
          posicoes.push({ row: row, col: 6 });
        }
        // Linha inferior (direita -> esquerda): row 6, cols 6-0
        for (let col = 6; col >= 0; col--) {
          posicoes.push({ row: 6, col: col });
        }
        // Lateral esquerda (baixo -> cima): col 0, rows 5-1
        for (let row = 5; row >= 1; row--) {
          posicoes.push({ row: row, col: 0 });
        }
        
        // Total: 7 + 5 + 7 + 5 = 24 posi√ß√µes no per√≠metro
        return posicoes.slice(0, numCasas);
      },

      renderizarTabuleiro() {
        const numCasas = state.casasDesafios.length;
        const posicoes = this.calcularPosicoesMopolyBoard(numCasas);
        
        // Limpar tabuleiro
        this.tabuleiro.innerHTML = '';
        
        // Criar mapa de posi√ß√µes para facilitar
        const mapaPosicoes = {};
        posicoes.forEach((pos, idx) => {
          const key = `${pos.row}-${pos.col}`;
          mapaPosicoes[key] = idx;
        });
        
        // Criar grid 7x7
        for (let row = 0; row < 7; row++) {
          for (let col = 0; col < 7; col++) {
            const key = `${row}-${col}`;
            
            // Centro do tabuleiro (√°rea 5x5 interna)
            if (row >= 1 && row <= 5 && col >= 1 && col <= 5) {
              continue;
            }
            
            // Verificar se h√° casa nesta posi√ß√£o
            if (mapaPosicoes.hasOwnProperty(key)) {
              const casaIdx = mapaPosicoes[key];
              const casaInfo = state.casasDesafios[casaIdx];
              
              const casa = document.createElement('div');
              casa.className = `casa ${casaInfo.tipo}`;
              casa.dataset.index = casaIdx;
              casa.style.gridColumn = col + 1;
              casa.style.gridRow = row + 1;
              
              // Destacar casas com jogadores
              const posJ1 = state.posicaoJ1;
              const posJ2 = state.posicaoJ2;
              if (casaIdx === posJ1 || casaIdx === posJ2) {
                casa.classList.add('atual');
              }
              
              // Conte√∫do da casa
              const textoPreviewJ1Raw = casaInfo.desafioRawJ1 || casaInfo.desafioRaw || casaInfo.desafio || null;
              const textoPreviewJ2Raw = casaInfo.desafioRawJ2 || casaInfo.desafioRaw || casaInfo.desafio || null;
              const desafioJ1Obj = typeof textoPreviewJ1Raw === 'string'
                ? { descricao: '', desafio: textoPreviewJ1Raw }
                : (textoPreviewJ1Raw || { descricao: '', desafio: '' });
              const desafioJ2Obj = typeof textoPreviewJ2Raw === 'string'
                ? { descricao: '', desafio: textoPreviewJ2Raw }
                : (textoPreviewJ2Raw || { descricao: '', desafio: '' });
              const textoPreviewJ1 = Game.formatarTexto(
                desafioJ1Obj.descricao || desafioJ1Obj.desafio || '',
                state.nome1,
                state.nome2,
                state.sexo1,
                state.sexo2
              );
              const textoPreviewJ2 = Game.formatarTexto(
                desafioJ2Obj.descricao || desafioJ2Obj.desafio || '',
                state.nome2,
                state.nome1,
                state.sexo2,
                state.sexo1
              );
              const classeJ1 = state.sexo1 === 'homem' ? 'genero-homem' : 'genero-mulher';
              const classeJ2 = state.sexo2 === 'homem' ? 'genero-homem' : 'genero-mulher';
              const maiorLen = Math.max(textoPreviewJ1.length, textoPreviewJ2.length);
              let tamanhoFonte = '0.65rem';
              if (maiorLen > 150) tamanhoFonte = '0.4rem';
              else if (maiorLen > 120) tamanhoFonte = '0.45rem';
              else if (maiorLen > 90) tamanhoFonte = '0.5rem';
              else if (maiorLen > 70) tamanhoFonte = '0.55rem';

              casa.innerHTML = `
                <div class="casa-inner">
                  <div class="casa-conteudo" style="--casa-texto-tamanho: ${tamanhoFonte}">
                    <div class="casa-slot slot-j1"></div>
                    <div class="casa-desafio ${classeJ1}">${textoPreviewJ1}</div>
                    <div class="casa-divisor"></div>
                    <div class="casa-slot slot-j2"></div>
                    <div class="casa-desafio ${classeJ2}">${textoPreviewJ2}</div>
                  </div>
                </div>
              `;

              const slotJ1 = casa.querySelector('.slot-j1');
              const slotJ2 = casa.querySelector('.slot-j2');
              if (casaIdx === posJ1 && slotJ1) {
                const chip = document.createElement('span');
                chip.className = 'casa-peao-slot j1';
                chip.textContent = `${state.emoji1 || 'üôÇ'} ${state.nome1 || 'J1'}`;
                slotJ1.appendChild(chip);
              }
              if (casaIdx === posJ2 && slotJ2) {
                const chip = document.createElement('span');
                chip.className = 'casa-peao-slot j2';
                chip.textContent = `${state.emoji2 || 'üôÇ'} ${state.nome2 || 'J2'}`;
                slotJ2.appendChild(chip);
              }
              
              this.tabuleiro.appendChild(casa);
            }
          }
        }
      },

      atualizarInfoJogo() {
        const nomeUltimo = state.ultimoJogador
          ? (state.ultimoJogador === 1 ? state.nome1 : state.nome2)
          : '-';
        const nomeAtual = state.jogadorAtual === 1 ? state.nome1 : state.nome2;
        const perdeVez = state.jogadorAtual === 1 ? state.perdeVezJ1 : state.perdeVezJ2;
        
        this.ultimoJogador.textContent = nomeUltimo;
        this.jogadorAtual.textContent = nomeAtual + (perdeVez ? ' (perde a vez)' : '');
        this.placar.textContent = `${state.nome1}: Casa ${state.posicaoJ1} | ${state.nome2}: Casa ${state.posicaoJ2}`;
      },

      mostrarDesafio(tipo, texto, efeito = null) {
        const centro = document.getElementById('centroConteudo');
        if (!centro) return;
        
        let html = `<span class="centro-tipo ${tipo}">${tipo.toUpperCase()}</span>`;
        html += `<p class="centro-desafio">${texto}</p>`;
        if (efeito) {
          html += `<p class="centro-efeito">‚ú® ${efeito}</p>`;
        }
        centro.innerHTML = html;
        centro.className = '';
      },

      limparDesafio() {
        const centro = document.getElementById('centroConteudo');
        if (centro) {
          centro.innerHTML = 'Pr√≥ximo jogador...';
          centro.className = 'centro-vazio';
        }
      },

      travarDados(travar) {
        if (this.btnDado) {
          this.btnDado.disabled = travar;
        }
      },

      definirValorDado(valor) {
        if (this.btnDado) {
          this.btnDado.textContent = valor;
        }
      },

      animarDado(ativo) {
        if (this.btnDado) {
          this.btnDado.classList.toggle('rolando', ativo);
        }
      },

      mostrarVitoria(nome) {
        this.vencedorNome.textContent = `${nome} venceu!`;
        this.modalVitoria.classList.add('is-active');
      },

      fecharModal() {
        this.modalVitoria.classList.remove('is-active');
      }
    };

    /* ============================================
       M√ìDULO: GAME
    ============================================ */
    const Game = {
      // Gera preview das casas e prepara pools de desafios
      gerarDesafiosCasas() {
        const dados = jogo[state.nivel];
        const tabuleiro = dados.tabuleiro;
        this.prepararPools();
        state.casasDesafios = tabuleiro.map((tipo) => {
          let desafioRawJ1 = { descricao: 'Desafio', desafio: 'Desafio ao cair aqui.' };
          let desafioRawJ2 = { descricao: 'Desafio', desafio: 'Desafio ao cair aqui.' };
          if (tipo === 'inicio') {
            desafioRawJ1 = { descricao: 'Partida!', desafio: 'Partida!' };
            desafioRawJ2 = { descricao: 'Partida!', desafio: 'Partida!' };
          }
          if (tipo === 'final') {
            desafioRawJ1 = { descricao: 'Chegada!', desafio: 'Chegada!' };
            desafioRawJ2 = { descricao: 'Chegada!', desafio: 'Chegada!' };
          }
          if (tipo !== 'inicio' && tipo !== 'final') {
            desafioRawJ1 = this.sortearDesafioFixoParaJogador(tipo, 1);
            desafioRawJ2 = this.sortearDesafioFixoParaJogador(tipo, 2);
          }
          return { tipo, desafioRawJ1, desafioRawJ2 };
        });
      },

      sortearDesafioFixoParaJogador(tipo, jogador) {
        const sexoJogador = jogador === 1 ? state.sexo1 : state.sexo2;
        const sexoParceiro = jogador === 1 ? state.sexo2 : state.sexo1;
        const alvoJogador = sexoJogador === 'homem' ? 'jogador_homem' : 'jogador_mulher';
        const alvoParceiro = sexoParceiro === 'homem' ? 'parceiro_homem' : 'parceiro_mulher';
        let texto = null;

        if (Math.random() < 0.6) {
          const alvos = this.embaralhar([alvoJogador, alvoParceiro]);
          for (const alvo of alvos) {
            texto = this.pegarDoPool(tipo, alvo);
            if (texto) break;
          }
        }

        if (!texto) {
          texto = this.pegarDoPool(tipo, 'generico');
        }

        return texto || { descricao: 'Aproveite o momento', desafio: 'Aproveite o momento!' };
      },

      prepararPools() {
        const desafios = jogo[state.nivel].desafios;
        state.desafiosPools = {};
        for (const tipo in desafios) {
          state.desafiosPools[tipo] = {};
          for (const alvo in desafios[tipo]) {
            state.desafiosPools[tipo][alvo] = this.embaralhar([...desafios[tipo][alvo]]);
          }
        }
      },

      embaralhar(lista) {
        for (let i = lista.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [lista[i], lista[j]] = [lista[j], lista[i]];
        }
        return lista;
      },

      pegarDoPool(tipo, alvo) {
        const base = jogo[state.nivel]?.desafios?.[tipo]?.[alvo];
        if (!base || base.length === 0) return null;

        if (!state.desafiosPools[tipo] || !state.desafiosPools[tipo][alvo]) {
          state.desafiosPools[tipo] = state.desafiosPools[tipo] || {};
          state.desafiosPools[tipo][alvo] = this.embaralhar([...base]);
        }

        if (state.desafiosPools[tipo][alvo].length === 0) {
          state.desafiosPools[tipo][alvo] = this.embaralhar([...base]);
        }

        return state.desafiosPools[tipo][alvo].pop();
      },

      sortearDesafio(tipo, jogador) {
        if (tipo === 'inicio') return { descricao: 'Partida!', desafio: 'Partida! Boa sorte!' };
        if (tipo === 'final') return { descricao: 'Vit√≥ria!', desafio: 'Vit√≥ria! Parab√©ns!' };

        const sexoJogador = jogador === 1 ? state.sexo1 : state.sexo2;
        const sexoParceiro = jogador === 1 ? state.sexo2 : state.sexo1;

        const alvoJogador = sexoJogador === 'homem' ? 'jogador_homem' : 'jogador_mulher';
        const alvoParceiro = sexoParceiro === 'homem' ? 'parceiro_homem' : 'parceiro_mulher';

        let texto = null;
        if (Math.random() < 0.6) {
          const alvos = this.embaralhar([alvoJogador, alvoParceiro]);
          for (const alvo of alvos) {
            texto = this.pegarDoPool(tipo, alvo);
            if (texto) break;
          }
        }

        if (!texto) {
          texto = this.pegarDoPool(tipo, 'generico');
        }

        return texto || { descricao: 'Aproveite o momento', desafio: 'Aproveite o momento!' };
      },

      formatarTexto(texto, jogadorNome, parceiroNome, sexoJogador, sexoParceiro) {
        const pronomeJogador = sexoJogador === 'homem' ? 'ele' : 'ela';
        const pronomeParceiro = sexoParceiro === 'homem' ? 'ele' : 'ela';

        return texto
          .replace(/{jogador}/g, jogadorNome)
          .replace(/{parceiro}/g, parceiroNome)
          .replace(/{ele_ela_jogador}/g, pronomeJogador)
          .replace(/{ele_ela_parceiro}/g, pronomeParceiro);
      },

      iniciar() {
        if (!state.desafiosPools || Object.keys(state.desafiosPools).length === 0) {
          this.prepararPools();
        }
        const precisaGerar = !Array.isArray(state.casasDesafios) || state.casasDesafios.length === 0
          || state.casasDesafios.some(casa =>
            !casa.desafioRawJ1
            || !casa.desafioRawJ2
            || typeof casa.desafioRawJ1 === 'string'
            || typeof casa.desafioRawJ2 === 'string'
          );
        if (precisaGerar) {
          this.gerarDesafiosCasas();
        }
        UI.aplicarTema(state.nivel);
        UI.renderizarTabuleiro();
        UI.atualizarInfoJogo();
        UI.limparDesafio();
        Storage.salvar();
      },

      async moverPeao(passos) {
        if (state.travado) return;
        
        const jogador = state.jogadorAtual;
        state.ultimoJogador = jogador;
        const perdeVez = jogador === 1 ? state.perdeVezJ1 : state.perdeVezJ2;
        
        // Se perde a vez, apenas passar para pr√≥ximo
        if (perdeVez) {
          if (jogador === 1) state.perdeVezJ1 = false;
          else state.perdeVezJ2 = false;
          
          UI.mostrarDesafio('surpresa', `${jogador === 1 ? state.nome1 : state.nome2} perdeu a vez!`);
          this.proximoJogador({ limparDesafio: false });
          Storage.salvar();
          return;
        }

        state.travado = true;
        UI.travarDados(true);

        const maxPos = state.casasDesafios.length - 1;
        let posAtual = jogador === 1 ? state.posicaoJ1 : state.posicaoJ2;
        
        // Anima√ß√£o passo a passo
        for (let i = 0; i < passos; i++) {
          posAtual = Math.min(posAtual + 1, maxPos);
          
          if (jogador === 1) state.posicaoJ1 = posAtual;
          else state.posicaoJ2 = posAtual;
          
          UI.renderizarTabuleiro();
          await this.delay(180);
          
          // Parar se chegou ao final
          if (posAtual >= maxPos) break;
        }

        // Verificar vit√≥ria
        if (posAtual >= maxPos) {
          const nomeVencedor = jogador === 1 ? state.nome1 : state.nome2;
          UI.mostrarVitoria(nomeVencedor);
          Storage.apagar();
          state.travado = false;
          return;
        }

        // Processar casa
        const venceuComEfeito = this.processarCasa(posAtual, jogador);
        if (venceuComEfeito) {
          state.travado = false;
          return;
        }

        this.proximoJogador({ limparDesafio: false });
        state.travado = false;
        Storage.salvar();
      },

      processarCasa(posicao, jogador) {
        let casaInfo = state.casasDesafios[posicao];
        let tipo = casaInfo.tipo;
        const jogadorNome = jogador === 1 ? state.nome1 : state.nome2;
        const parceiroNome = jogador === 1 ? state.nome2 : state.nome1;
        const sexoJogador = jogador === 1 ? state.sexo1 : state.sexo2;
        const sexoParceiro = jogador === 1 ? state.sexo2 : state.sexo1;
        let efeito = null;
        let usouMover = false;

        // Sortear efeito se for surpresa
        if (tipo === 'surpresa') {
          efeito = this.sortearEfeito();
          state.efeitoAtual = efeito;
          if (efeito) {
            this.aplicarEfeito(efeito, jogador);
          }

          if (efeito && efeito.tipo === 'mover') {
            usouMover = true;
            posicao = jogador === 1 ? state.posicaoJ1 : state.posicaoJ2;
            casaInfo = state.casasDesafios[posicao];
            tipo = casaInfo.tipo;
            const maxPos = state.casasDesafios.length - 1;
            if (posicao >= maxPos) {
              const nomeVencedor = jogador === 1 ? state.nome1 : state.nome2;
              UI.mostrarVitoria(nomeVencedor);
              Storage.apagar();
              return true;
            }
          }
        }

        const desafioTextoRaw = (jogador === 1 ? casaInfo.desafioRawJ1 : casaInfo.desafioRawJ2)
          || casaInfo.desafioRaw
          || casaInfo.desafio
          || this.sortearDesafio(tipo, jogador);
        const desafioObj = typeof desafioTextoRaw === 'string'
          ? { descricao: '', desafio: desafioTextoRaw }
          : (desafioTextoRaw || { descricao: '', desafio: '' });
        const desafioTexto = this.formatarTexto(
          desafioObj.desafio || desafioObj.descricao || '',
          jogadorNome,
          parceiroNome,
          sexoJogador,
          sexoParceiro
        );
        state.desafioAtual = { tipo, texto: desafioTexto };

        // Aplicar efeito surpresa
        if (efeito) {
          if (usouMover) {
            UI.renderizarTabuleiro();
          }
          UI.mostrarDesafio(tipo, desafioTexto, efeito.texto);
        } else {
          UI.mostrarDesafio(tipo, desafioTexto);
        }

        UI.travarDados(true);
        return false;
      },

      sortearEfeito() {
        if (efeitosSurpresa.length === 0) return null;
        return efeitosSurpresa[Math.floor(Math.random() * efeitosSurpresa.length)];
      },

      aplicarEfeito(efeito, jogador) {
        const maxPos = state.casasDesafios.length - 1;

        switch (efeito.tipo) {
          case 'mover':
            if (jogador === 1) {
              state.posicaoJ1 = Math.max(0, Math.min(state.posicaoJ1 + efeito.valor, maxPos));
            } else {
              state.posicaoJ2 = Math.max(0, Math.min(state.posicaoJ2 + efeito.valor, maxPos));
            }
            UI.renderizarTabuleiro();
            break;

          case 'trocar':
            const temp = state.posicaoJ1;
            state.posicaoJ1 = state.posicaoJ2;
            state.posicaoJ2 = temp;
            UI.renderizarTabuleiro();
            break;

          case 'perder':
            if (jogador === 1) state.perdeVezJ1 = true;
            else state.perdeVezJ2 = true;
            break;

          case 'extra':
            // Jogador joga novamente - n√£o alterna
            break;
        }
      },

      proximoJogador({ limparDesafio = true } = {}) {
        // S√≥ alterna se n√£o tiver efeito "extra"
        if (!state.efeitoAtual || state.efeitoAtual.tipo !== 'extra') {
          state.jogadorAtual = state.jogadorAtual === 1 ? 2 : 1;
        }
        
        state.desafioAtual = null;
        state.efeitoAtual = null;
        
        UI.atualizarInfoJogo();
        UI.renderizarTabuleiro();
        if (limparDesafio) {
          UI.limparDesafio();
        }
        UI.travarDados(false);
        Storage.salvar();
      },

      reiniciar() {
        state.posicaoJ1 = 0;
        state.posicaoJ2 = 0;
        state.jogadorAtual = 1;
        state.ultimoJogador = null;
        state.perdeVezJ1 = false;
        state.perdeVezJ2 = false;
        state.desafioAtual = null;
        state.efeitoAtual = null;
        state.travado = false;

        this.gerarDesafiosCasas();
        UI.renderizarTabuleiro();
        UI.atualizarInfoJogo();
        UI.limparDesafio();
        UI.travarDados(false);
        Storage.salvar();
      },

      delay(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
      }
    };

    /* ============================================
       INICIALIZA√á√ÉO E EVENTOS
    ============================================ */
    function init() {
      // Verificar save existente
      UI.mostrarBotoesSave(Storage.existe());

      // Eventos p√°gina de nomes
      UI.inputNome1.addEventListener('input', () => UI.atualizarBotaoAvancar());
      UI.inputNome2.addEventListener('input', () => UI.atualizarBotaoAvancar());
      UI.selectSexo1.addEventListener('change', () => UI.atualizarBotaoAvancar());
      UI.selectSexo2.addEventListener('change', () => UI.atualizarBotaoAvancar());
      UI.renderEmojiGrid(UI.emojiGrid1, 'emoji1');
      UI.renderEmojiGrid(UI.emojiGrid2, 'emoji2');

      UI.btnAvancar.addEventListener('click', () => {
        state.nome1 = UI.inputNome1.value.trim();
        state.nome2 = UI.inputNome2.value.trim();
        state.sexo1 = UI.selectSexo1.value;
        state.sexo2 = UI.selectSexo2.value;
        state.emoji1 = UI.emojiInput1.value;
        state.emoji2 = UI.emojiInput2.value;
        UI.atualizarNomesNivel();
        UI.mostrarPagina('paginaNivel');
      });

      UI.btnPreencher.addEventListener('click', () => {
        UI.inputNome1.value = 'Gabriel';
        UI.selectSexo1.value = 'homem';
        UI.selecionarEmoji('emoji1', '‚ôÇ');
        UI.inputNome2.value = 'Dandara';
        UI.selectSexo2.value = 'mulher';
        UI.selecionarEmoji('emoji2', '‚ôÄ');
        UI.atualizarBotaoAvancar();
      });

      UI.btnContinuar.addEventListener('click', () => {
        const save = Storage.carregar();
        if (save && save.sexo1 && save.sexo2 && save.emoji1 && save.emoji2) {
          Object.assign(state, save);
          UI.inputNome1.value = state.nome1;
          UI.inputNome2.value = state.nome2;
          UI.selectSexo1.value = state.sexo1;
          UI.selectSexo2.value = state.sexo2;
          UI.selecionarEmoji('emoji1', state.emoji1);
          UI.selecionarEmoji('emoji2', state.emoji2);
          UI.aplicarTema(state.nivel);
          UI.mostrarPagina('paginaJogo');
          Game.iniciar();
        } else {
          Storage.apagar();
          UI.mostrarBotoesSave(false);
        }
      });

      UI.btnApagar.addEventListener('click', () => {
        if (confirm('Deseja apagar o jogo salvo?')) {
          Storage.apagar();
          UI.mostrarBotoesSave(false);
        }
      });

      // Eventos p√°gina de n√≠vel
      UI.btnsNivel.forEach(btn => {
        btn.addEventListener('click', () => {
          state.nivel = btn.dataset.nivel;
          UI.selecionarNivel(state.nivel);
        });
      });

      UI.btnVoltar.addEventListener('click', () => {
        state.nivel = null;
        UI.selecionarNivel(null);
        UI.mostrarPagina('paginaNomes');
      });

      UI.btnIniciar.addEventListener('click', () => {
        if (state.nivel) {
          state.posicaoJ1 = 0;
          state.posicaoJ2 = 0;
          state.jogadorAtual = 1;
          Game.gerarDesafiosCasas();
          UI.mostrarPagina('paginaJogo');
          Game.iniciar();
        }
      });

      // Eventos p√°gina do jogo - Dado unico
      let dadoRolando = false;
      if (UI.btnDado) {
        UI.btnDado.addEventListener('click', () => {
          if (state.travado || dadoRolando || UI.btnDado.disabled) return;
          dadoRolando = true;
          UI.travarDados(true);
          UI.animarDado(true);

          let valorAtual = 1;
          const intervalo = setInterval(() => {
            valorAtual = Math.floor(Math.random() * 6) + 1;
            UI.definirValorDado(valorAtual);
          }, 80);

          setTimeout(() => {
            clearInterval(intervalo);
            UI.animarDado(false);
            dadoRolando = false;
            Game.moverPeao(valorAtual);
          }, 700);
        });
      }

      UI.btnReiniciar.addEventListener('click', () => {
        if (confirm('Deseja reiniciar o jogo?')) {
          Game.reiniciar();
        }
      });

      // Eventos modal
      UI.btnJogarNovamente.addEventListener('click', () => {
        UI.fecharModal();
        Game.reiniciar();
      });

      UI.btnVoltarMenu.addEventListener('click', () => {
        UI.fecharModal();
        Storage.apagar();
        state.nivel = null;
        UI.selecionarNivel(null);
        UI.mostrarPagina('paginaNomes');
      });
    }

    // Iniciar aplica√ß√£o
    init();
  </script>
</body>
</html>
